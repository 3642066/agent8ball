function j(a){throw a;}var p=true,q=null,r=false;function x(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var A,C=this;function ca(a,c){for(var b=a.split("."),d=c||C,e;e=b.shift();)if(d[e])d=d[e];else return q;return d}function da(){}
function ea(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&(Object.prototype.toString.call(a)=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}function ga(a){return ea(a)=="array"}function ha(a){var c=ea(a);return c=="array"||c=="object"&&typeof a.length=="number"}function D(a){return typeof a=="string"}function ia(a){return typeof a=="number"}function ja(a){return ea(a)=="function"}function ka(a){a=ea(a);return a=="object"||a=="array"||a=="function"}function la(a){return a[ma]||(a[ma]=++na)}
var ma="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),na=0;function oa(a,c){var b=c||C;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}else return function(){return a.apply(b,arguments)}}
function pa(a){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var qa=Date.now||function(){return+new Date};function E(a,c){function b(){}b.prototype=c.prototype;a.Wd=c.prototype;a.prototype=new b};function ta(a){this.stack=Error().stack||"";if(a)this.message=String(a)}E(ta,Error);ta.prototype.name="CustomError";function ua(a){for(var c=1;c<arguments.length;c++){var b=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,b)}return a}function va(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}
function wa(a,c){if(c)return a.replace(xa,"&amp;").replace(ya,"&lt;").replace(Ba,"&gt;").replace(Ca,"&quot;");else{if(!Da.test(a))return a;if(a.indexOf("&")!=-1)a=a.replace(xa,"&amp;");if(a.indexOf("<")!=-1)a=a.replace(ya,"&lt;");if(a.indexOf(">")!=-1)a=a.replace(Ba,"&gt;");if(a.indexOf('"')!=-1)a=a.replace(Ca,"&quot;");return a}}var xa=/&/g,ya=/</g,Ba=/>/g,Ca=/\"/g,Da=/[&<>\"]/;
function Ea(a,c){for(var b=0,d=va(String(a)).split("."),e=va(String(c)).split("."),f=Math.max(d.length,e.length),g=0;b==0&&g<f;g++){var h=d[g]||"",i=e[g]||"",k=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var m=k.exec(h)||["","",""],n=l.exec(i)||["","",""];if(m[0].length==0&&n[0].length==0)break;b=Fa(m[1].length==0?0:parseInt(m[1],10),n[1].length==0?0:parseInt(n[1],10))||Fa(m[2].length==0,n[2].length==0)||Fa(m[2],n[2])}while(b==0)}return b}
function Fa(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};function Ga(a,c){c.unshift(a);ta.call(this,ua.apply(q,c));c.shift();this.Ah=a}E(Ga,ta);Ga.prototype.name="AssertionError";function Ha(a,c){if(!a){var b=Array.prototype.slice.call(arguments,2),d="Assertion failed";if(c){d+=": "+c;var e=b}j(new Ga(""+d,e||[]))}}function Ia(a){j(new Ga("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var H=Array.prototype,Ja=H.indexOf?function(a,c,b){Ha(a.length!=q);return H.indexOf.call(a,c,b)}:function(a,c,b){b=b==q?0:b<0?Math.max(0,a.length+b):b;if(D(a)){if(!D(c)||c.length!=1)return-1;return a.indexOf(c,b)}for(b=b;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1},Ka=H.forEach?function(a,c,b){Ha(a.length!=q);H.forEach.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=D(a)?a.split(""):a,f=0;f<d;f++)f in e&&c.call(b,e[f],f,a)},La=H.map?function(a,c,b){Ha(a.length!=q);return H.map.call(a,c,
b)}:function(a,c,b){for(var d=a.length,e=Array(d),f=D(a)?a.split(""):a,g=0;g<d;g++)if(g in f)e[g]=c.call(b,f[g],g,a);return e};function Ma(a){if(!ga(a))for(var c=a.length-1;c>=0;c--)delete a[c];a.length=0}function Na(a,c){Ha(a.length!=q);return H.splice.call(a,c,1).length==1}function Oa(a,c,b){a:{for(var d=a.length,e=D(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&c.call(b,e[f],f,a)){c=f;break a}c=-1}if(c>=0){Na(a,c);return p}return r}function Pa(){return H.concat.apply(H,arguments)}
function Qa(a){if(ga(a))return Pa(a);else{for(var c=[],b=0,d=a.length;b<d;b++)c[b]=a[b];return c}}function Ra(a,c,b){Ha(a.length!=q);return arguments.length<=2?H.slice.call(a,c):H.slice.call(a,c,b)}function Sa(a,c){return a>c?1:a<c?-1:0};function Ta(){}Ta.prototype.rf=r;Ta.prototype.Sb=function(){if(!this.rf){this.rf=p;this.kb()}};Ta.prototype.kb=x();var Ua;function I(a,c){this.type=a;this.currentTarget=this.target=c}E(I,Ta);I.prototype.kb=function(){delete this.type;delete this.target;delete this.currentTarget};I.prototype.Gc=r;I.prototype.Ud=p;var Va,Wa,Xa,Ya;function Za(){return C.navigator?C.navigator.userAgent:q}Ya=Xa=Wa=Va=r;var $a;if($a=Za()){var ab=C.navigator;Va=$a.indexOf("Opera")==0;Wa=!Va&&$a.indexOf("MSIE")!=-1;Xa=!Va&&$a.indexOf("WebKit")!=-1;Ya=!Va&&!Xa&&ab.product=="Gecko"}var bb=Va,cb=Wa,db=Ya,eb=Xa,fb=C.navigator,gb=(fb&&fb.platform||"").indexOf("Mac")!=-1,hb,ib="",jb;
if(bb&&C.opera){var kb=C.opera.version;ib=typeof kb=="function"?kb():kb}else{if(db)jb=/rv\:([^\);]+)(\)|;)/;else if(cb)jb=/MSIE\s+([^\);]+)(\)|;)/;else if(eb)jb=/WebKit\/(\S+)/;if(jb){var lb=jb.exec(Za());ib=lb?lb[1]:""}}hb=ib;var mb={};function nb(a,c){a&&this.td(a,c)}E(nb,I);A=nb.prototype;A.target=q;A.relatedTarget=q;A.offsetX=0;A.offsetY=0;A.clientX=0;A.clientY=0;A.screenX=0;A.screenY=0;A.button=0;A.keyCode=0;A.charCode=0;A.ctrlKey=r;A.altKey=r;A.shiftKey=r;A.metaKey=r;A.jh=r;A.sf=q;
A.td=function(a,c){var b=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(db)try{d=d.nodeName&&d}catch(e){d=q}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==undefined?a.offsetX:a.layerX;this.offsetY=a.offsetY!==undefined?a.offsetY:a.layerY;this.clientX=a.clientX!==undefined?a.clientX:a.pageX;this.clientY=a.clientY!==undefined?a.clientY:a.pageY;this.screenX=a.screenX||0;
this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.jh=gb?a.metaKey:a.ctrlKey;this.sf=a;delete this.Ud;delete this.Gc};cb&&(mb["8"]||(mb["8"]=Ea(hb,"8")>=0));nb.prototype.kb=function(){nb.Wd.kb.call(this);this.relatedTarget=this.currentTarget=this.target=this.sf=q};function ob(){}var qb=0;A=ob.prototype;A.key=0;A.Hc=r;A.mf=r;A.td=function(a,c,b,d,e,f){if(ja(a))this.wf=p;else if(a&&a.handleEvent&&ja(a.handleEvent))this.wf=r;else j(Error("Invalid listener argument"));this.Tc=a;this.Sf=c;this.src=b;this.type=d;this.capture=!!e;this.se=f;this.mf=r;this.key=++qb;this.Hc=r};A.handleEvent=function(a){if(this.wf)return this.Tc.call(this.se||this.src,a);return this.Tc.handleEvent.call(this.Tc,a)};function rb(a,c){this.Qf=c;this.Tb=[];if(a>this.Qf)j(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var b=0;b<a;b++)this.Tb.push(this.ub?this.ub():{})}E(rb,Ta);rb.prototype.ub=q;rb.prototype.qf=q;function sb(a){if(a.Tb.length)return a.Tb.pop();return a.ub?a.ub():{}}function tb(a,c){a.Tb.length<a.Qf?a.Tb.push(c):ub(a,c)}function ub(a,c){if(a.qf)a.qf(c);else if(ka(c))if(ja(c.Sb))c.Sb();else for(var b in c)delete c[b]}
rb.prototype.kb=function(){rb.Wd.kb.call(this);for(var a=this.Tb;a.length;)ub(this,a.pop());delete this.Tb};var vb;var wb=(vb="ScriptEngine"in C&&C.ScriptEngine()=="JScript")?C.ScriptEngineMajorVersion()+"."+C.ScriptEngineMinorVersion()+"."+C.ScriptEngineBuildVersion():"0";var xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb;
(function(){function a(){return{jb:0,hb:0}}function c(){return[]}function b(){function n(o){return g.call(n.src,n.key,o)}return n}function d(){return new ob}function e(){return new nb}var f=vb&&!(Ea(wb,"5.7")>=0),g;Cb=function(n){g=n};if(f){xb=function(){return sb(h)};yb=function(n){tb(h,n)};zb=function(){return sb(i)};Ab=function(n){tb(i,n)};Bb=function(){return sb(k)};Db=function(){tb(k,b())};Eb=function(){return sb(l)};Fb=function(n){tb(l,n)};Gb=function(){return sb(m)};Hb=function(n){tb(m,n)};
var h=new rb(0,600);h.ub=a;var i=new rb(0,600);i.ub=c;var k=new rb(0,600);k.ub=b;var l=new rb(0,600);l.ub=d;var m=new rb(0,600);m.ub=e}else{xb=a;yb=da;zb=c;Ab=da;Bb=b;Db=da;Eb=d;Fb=da;Gb=e;Hb=da}})();function Ib(a,c,b){for(var d in a)c.call(b,a[d],d,a)}function Jb(a){var c=0;for(var b in a)c++;return c}function Kb(a){var c=[],b=0;for(var d in a)c[b++]=d;for(b=c.length-1;b>=0;b--){d=c[b];d in a&&delete a[d]}}var Lb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];
function Mb(a){for(var c,b,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)a[c]=b[c];for(var e=0;e<Lb.length;e++){c=Lb[e];if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]}}};var Nb={},J={},Ob={},Pb={};
function K(a,c,b,d,e){if(c)if(ga(c)){for(var f=0;f<c.length;f++)K(a,c[f],b,d,e);return q}else{d=!!d;var g=J;c in g||(g[c]=xb());g=g[c];if(!(d in g)){g[d]=xb();g.jb++}g=g[d];var h=la(a),i;g.hb++;if(g[h]){i=g[h];for(f=0;f<i.length;f++){g=i[f];if(g.Tc==b&&g.se==e){if(g.Hc)break;return i[f].key}}}else{i=g[h]=zb();g.jb++}f=Bb();f.src=a;g=Eb();g.td(b,f,a,c,d,e);b=g.key;f.key=b;i.push(g);Nb[b]=g;Ob[h]||(Ob[h]=zb());Ob[h].push(g);if(a.addEventListener){if(a==C||!a.of)a.addEventListener(c,f,d)}else a.attachEvent(Qb(c),
f);return b}else j(Error("Invalid event type"))}function Rb(a,c,b,d,e){if(ga(c)){for(var f=0;f<c.length;f++)Rb(a,c[f],b,d,e);return q}d=!!d;a:{f=J;if(c in f){f=f[c];if(d in f){f=f[d];a=la(a);if(f[a]){a=f[a];break a}}}a=q}if(!a)return r;for(f=0;f<a.length;f++)if(a[f].Tc==b&&a[f].capture==d&&a[f].se==e)return Sb(a[f].key);return r}
function Sb(a){if(!Nb[a])return r;var c=Nb[a];if(c.Hc)return r;var b=c.src,d=c.type,e=c.Sf,f=c.capture;if(b.removeEventListener){if(b==C||!b.of)b.removeEventListener(d,e,f)}else b.detachEvent&&b.detachEvent(Qb(d),e);b=la(b);e=J[d][f][b];if(Ob[b]){var g=Ob[b],h=Ja(g,c);h>=0&&Na(g,h);g.length==0&&delete Ob[b]}c.Hc=p;e.Rf=p;Tb(d,f,b,e);delete Nb[a];return p}
function Tb(a,c,b,d){if(!d.zd)if(d.Rf){for(var e=0,f=0;e<d.length;e++)if(d[e].Hc){var g=d[e].Sf;g.src=q;Db(g);Fb(d[e])}else{if(e!=f)d[f]=d[e];f++}d.length=f;d.Rf=r;if(f==0){Ab(d);delete J[a][c][b];J[a][c].jb--;if(J[a][c].jb==0){yb(J[a][c]);delete J[a][c];J[a].jb--}if(J[a].jb==0){yb(J[a]);delete J[a]}}}}
function Ub(a,c,b){var d=0,e=a==q,f=c==q,g=b==q;b=!!b;if(e)Ib(Ob,function(i){for(var k=i.length-1;k>=0;k--){var l=i[k];if((f||c==l.type)&&(g||b==l.capture)){Sb(l.key);d++}}});else{a=la(a);if(Ob[a]){a=Ob[a];for(e=a.length-1;e>=0;e--){var h=a[e];if((f||c==h.type)&&(g||b==h.capture)){Sb(h.key);d++}}}}return d}function Qb(a){if(a in Pb)return Pb[a];return Pb[a]="on"+a}
function Vb(a,c,b,d,e){var f=1;c=la(c);if(a[c]){a.hb--;a=a[c];if(a.zd)a.zd++;else a.zd=1;try{for(var g=a.length,h=0;h<g;h++){var i=a[h];if(i&&!i.Hc)f&=Wb(i,e)!==r}}finally{a.zd--;Tb(b,d,c,a)}}return Boolean(f)}function Wb(a,c){var b=a.handleEvent(c);a.mf&&Sb(a.key);return b}
Cb(function(a,c){if(!Nb[a])return p;var b=Nb[a],d=b.type,e=J;if(!(d in e))return p;e=e[d];var f,g;if(Ua===undefined)Ua=cb&&!C.addEventListener;if(Ua){f=c||ca("window.event");var h=p in e,i=r in e;if(h){if(f.keyCode<0||f.returnValue!=undefined)return p;a:{var k=r;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(l){k=p}if(k||f.returnValue==undefined)f.returnValue=p}}k=Gb();k.td(f,this);f=p;try{if(h){for(var m=zb(),n=k.currentTarget;n;n=n.parentNode)m.push(n);g=e[p];g.hb=g.jb;for(var o=m.length-1;!k.Gc&&
o>=0&&g.hb;o--){k.currentTarget=m[o];f&=Vb(g,m[o],d,p,k)}if(i){g=e[r];g.hb=g.jb;for(o=0;!k.Gc&&o<m.length&&g.hb;o++){k.currentTarget=m[o];f&=Vb(g,m[o],d,r,k)}}}else f=Wb(b,k)}finally{if(m){m.length=0;Ab(m)}k.Sb();Hb(k)}return f}d=new nb(c,this);try{f=Wb(b,d)}finally{d.Sb()}return f});function Xb(a){return Yb(a||arguments.callee.caller,[])}
function Yb(a,c){var b=[];if(Ja(c,a)>=0)b.push("[...circular reference...]");else if(a&&c.length<50){b.push(Zb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&b.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":f=f;break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Zb(f))?f:"[fn]";break;default:f=typeof f}if(f.length>40)f=f.substr(0,40)+"...";b.push(f)}c.push(a);b.push(")\n");try{b.push(Yb(a.caller,
c))}catch(g){b.push("[exception trying to get caller]\n")}}else a?b.push("[...long stack...]"):b.push("[end]");return b.join("")}function Zb(a){a=String(a);if(!$b[a]){var c=/function ([^\(]+)/.exec(a);$b[a]=c?c[1]:"[Anonymous]"}return $b[a]}var $b={};function ac(a,c,b,d,e){this.reset(a,c,b,d,e)}ac.prototype.mh=0;ac.prototype.uf=q;ac.prototype.tf=q;var bc=0;ac.prototype.reset=function(a,c,b,d,e){this.mh=typeof e=="number"?e:bc++;this.Eh=d||qa();this.Sc=a;this.gh=c;this.uh=b;delete this.uf;delete this.tf};ac.prototype.Uf=function(a){this.Sc=a};function cc(a){this.hh=a}cc.prototype.Te=q;cc.prototype.Sc=q;cc.prototype.Pc=q;function dc(a,c){this.name=a;this.value=c}dc.prototype.toString=aa("name");var ec=new dc("INFO",800),fc=new dc("CONFIG",700);cc.prototype.Uf=function(a){this.Sc=a};function gc(a){if(a.Sc)return a.Sc;if(a.Te)return gc(a.Te);Ia("Root logger has no level set.");return q}
cc.prototype.log=function(a,c,b){if(a.value>=gc(this).value){a=this.Ng(a,c,b);for(c=this;c;){b=c;var d=a;if(b.Pc)for(var e=0,f=void 0;f=b.Pc[e];e++)f(d);c=c.Te}}};
cc.prototype.Ng=function(a,c,b){var d=new ac(a,String(c),this.hh);if(b){d.uf=b;var e;var f=arguments.callee.caller;try{var g,h=ca("window.location.href");g=typeof b=="string"?{message:b,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"}:!b.lineNumber||!b.fileName||!b.stack?{message:b.message,name:b.name,lineNumber:b.lineNumber||b.th||"Not available",fileName:b.fileName||b.filename||b.sourceURL||h,stack:b.stack||"Not available"}:b;e="Message: "+wa(g.message)+'\nUrl: <a href="view-source:'+
g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+wa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+wa(Xb(f)+"-> ")}catch(i){e="Exception trying to expose exception! You win, we lose. "+i}d.tf=e}return d};cc.prototype.info=function(a,c){this.log(ec,a,c)};var hc=q;function ic(){if(!hc){hc=new cc("");hc.Uf(fc)}return hc};var jc={fg:".",ig:",",og:"%",rd:"0",ph:"+",mg:"-",hg:"E",qg:"\u2030",jg:"\u221e",ng:"NaN",eg:"#,##0.###",vg:"#E0",pg:"#,##0%",ag:"\u00a4#,##0.00;(\u00a4#,##0.00)",gg:"USD"},L=jc;L=jc;var kc={AED:"\u062f.\u0625",ARS:"$",AUD:"$",BDT:"\u09f3",BRL:"R$",CAD:"$",CHF:"Fr.",CLP:"$",CNY:"\u00a5",COP:"$",CRC:"\u20a1",CUP:"$",CZK:"K\u010d",DKK:"kr",DOP:"$",EGP:"\u00a3",EUR:"\u20ac",GBP:"\u00a3",HKD:"$",HRK:"kn",HUF:"Ft",IDR:"Rp",ILS:"\u20aa",INR:"Rs",IQD:"\u0639\u062f",ISK:"kr",JMD:"$",JPY:"\u00a5",KRW:"\u20a9",KWD:"\u062f.\u0643",LKR:"Rs",LVL:"Ls",MNT:"\u20ae",MXN:"$",MYR:"RM",NOK:"kr",NZD:"$",PAB:"B/.",PEN:"S/.",PHP:"P",PKR:"Rs.",PLN:"z\u0142",RON:"L",RUB:"\u0440\u0443\u0431",SAR:"\u0633.\u0631",
SEK:"kr",SGD:"$",SKK:"Sk",SYP:"SYP",THB:"\u0e3f",TRY:"TL",TWD:"NT$",USD:"$",UYU:"$",VEF:"Bs.F",VND:"\u20ab",XAF:"FCFA",XCD:"$",YER:"YER",ZAR:"R"};function lc(a,c){this.vf=c||L.gg;this.Kg=kc[this.vf];this.Qd=40;this.gb=1;this.Pe=3;this.Rd=this.jd=0;this.Ve=this.Ue="";this.Sd="-";this.Qe="";this.kd=1;this.re=3;this.Yd=this.pf=r;if(typeof a=="number")switch(a){case 1:mc(this,L.eg);break;case 2:mc(this,L.vg);break;case 3:mc(this,L.pg);break;case 4:mc(this,L.ag);break;default:j(Error("Unsupported pattern type."))}else mc(this,a)}
function mc(a,c){a.Dh=c.replace(/ /g,"\u00a0");var b=[0];a.Ue=nc(a,c,b);for(var d=b[0],e=-1,f=0,g=0,h=0,i=-1,k=c.length,l=p;b[0]<k&&l;b[0]++)switch(c.charAt(b[0])){case "#":if(g>0)h++;else f++;i>=0&&e<0&&i++;break;case "0":if(h>0)j(Error('Unexpected "0" in pattern "'+c+'"'));g++;i>=0&&e<0&&i++;break;case ",":i=0;break;case ".":if(e>=0)j(Error('Multiple decimal separators in pattern "'+c+'"'));e=f+g+h;break;case "E":if(a.Yd)j(Error('Multiple exponential symbols in pattern "'+c+'"'));a.Yd=p;for(a.Rd=
0;b[0]+1<k&&c.charAt(b[0]+1)=="0";){b[0]++;a.Rd++}if(f+g<1||a.Rd<1)j(Error('Malformed exponential pattern "'+c+'"'));l=r;break;default:b[0]--;l=r}if(g==0&&f>0&&e>=0){g=e;g==0&&g++;h=f-g;f=g-1;g=1}if(e<0&&h>0||e>=0&&(e<f||e>f+g)||i==0)j(Error('Malformed pattern "'+c+'"'));h=f+g+h;a.Pe=e>=0?h-e:0;if(e>=0){a.jd=f+g-e;if(a.jd<0)a.jd=0}a.gb=(e>=0?e:h)-f;if(a.Yd){a.Qd=f+a.gb;if(a.Pe==0&&a.gb==0)a.gb=1}a.re=Math.max(0,i);a.pf=e==0||e==h;d=b[0]-d;a.Ve=nc(a,c,b);if(b[0]<c.length&&c.charAt(b[0])==oc){b[0]++;
a.Sd=nc(a,c,b);b[0]+=d;a.Qe=nc(a,c,b)}else{a.Sd=a.Ue+a.Sd;a.Qe+=a.Ve}}
function pc(a,c,b,d){var e=Math.pow(10,a.Pe);c=Math.round(c*e);var f=Math.floor(c/e),g=Math.floor(c-f*e),h=a.jd>0||g>0,i="";for(c=f;c>1.0E20;){i="0"+i;c=Math.round(c/10)}i=c+i;var k=L.fg,l=L.ig;c=L.rd.charCodeAt(0);var m=i.length;if(f>0||b>0){for(f=m;f<b;f++)d.push(L.rd);for(f=0;f<m;f++){d.push(String.fromCharCode(c+i.charAt(f)*1));m-f>1&&a.re>0&&(m-f)%a.re==1&&d.push(l)}}else h||d.push(L.rd);if(a.pf||h)d.push(k);b=""+(g+e);for(e=b.length;b.charAt(e-1)=="0"&&e>a.jd+1;)e--;for(f=1;f<e;f++)d.push(String.fromCharCode(c+
b.charAt(f)*1))}function qc(a,c,b){b.push(L.hg);if(c<0){c=-c;b.push(L.mg)}c=""+c;for(var d=c.length;d<a.Rd;d++)b.push(L.rd);b.push(c)}var oc=";";
function nc(a,c,b){for(var d="",e=r,f=c.length;b[0]<f;b[0]++){var g=c.charAt(b[0]);if(g=="'")if(b[0]+1<f&&c.charAt(b[0]+1)=="'"){b[0]++;d+="'"}else e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case oc:return d;case "\u00a4":if(b[0]+1<f&&c.charAt(b[0]+1)=="\u00a4"){b[0]++;d+=a.vf}else d+=a.Kg;break;case "%":if(a.kd!=1)j(Error("Too many percent/permill"));a.kd=100;d+=L.og;break;case "\u2030":if(a.kd!=1)j(Error("Too many percent/permill"));a.kd=1E3;d+=L.qg;break;default:d+=
g}}return d};function rc(a){var c;c=(c=a.className)&&typeof c.split=="function"?c.split(/\s+/):[];var b;b=Ra(arguments,1);for(var d=0,e=0;e<b.length;e++)if(!(Ja(c,b[e])>=0)){c.push(b[e]);d++}b=d==b.length;a.className=c.join(" ");return b};function sc(a,c){this.x=a!==undefined?a:0;this.y=c!==undefined?c:0}sc.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function tc(a,c){this.width=a;this.height=c}function uc(a,c){if(a==c)return p;if(!a||!c)return r;return a.width==c.width&&a.height==c.height}tc.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};tc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};tc.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function vc(a,c){Ib(c,function(b,d){if(d=="style")a.style.cssText=b;else if(d=="class")a.className=b;else if(d=="for")a.htmlFor=b;else if(d in wc)a.setAttribute(wc[d],b);else a[d]=b})}var wc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",type:"type"};
function xc(){var a=arguments,c=a[0],b=a[1];if(cb&&b&&(b.name||b.type)){c=["<",c];b.name&&c.push(' name="',wa(b.name),'"');if(b.type){c.push(' type="',wa(b.type),'"');var d={};Mb(d,b);b=d;delete b.type}c.push(">");c=c.join("")}c=document.createElement(c);if(b)if(D(b))c.className=b;else ga(b)?rc.apply(q,[c].concat(b)):vc(c,b);a.length>2&&yc(document,c,a,2);return c}
function yc(a,c,b,d){function e(g){if(g)c.appendChild(D(g)?a.createTextNode(g):g)}for(d=d;d<b.length;d++){var f=b[d];ha(f)&&!(ka(f)&&f.nodeType>0)?Ka(zc(f)?Qa(f):f,e):e(f)}}function zc(a){if(a&&typeof a.length=="number")if(ka(a))return typeof a.item=="function"||typeof a.item=="string";else if(ja(a))return typeof a.item=="function";return r};var Ac;function Bc(){if(Ac){for(var a=Ac,c;c=a.firstChild;)a.removeChild(c);Ac.style.setProperty("display","none")}}function Cc(a){if(Ac){Ac.style.setProperty("display","block");a=xc("div",q,wa(a.gh));Ac.appendChild(a)}};function N(a,c){if(a instanceof N)this.Ea=a.Ea;else{var b;if(b=ha(a))a:{for(var d=b=0;d<a.length;d++){if(!ha(a[d])||b>0&&a[d].length!=b){b=r;break a}for(var e=0;e<a[d].length;e++)if(!ia(a[d][e])){b=r;break a}if(b==0)b=a[d].length}b=b!=0}if(b)this.Ea=Qa(a);else if(a instanceof tc)this.Ea=Dc(a.height,a.width);else if(ia(a)&&ia(c)&&a>0&&c>0)this.Ea=Dc(a,c);else j(Error("Invalid argument(s) for Matrix contructor"))}this.ma=new tc(this.Ea[0].length,this.Ea.length)}
function Ec(a,c,b){for(var d=0;d<a.ma.height;d++)for(var e=0;e<a.ma.width;e++)c.call(b,a.Ea[d][e],d,e,a)}function Fc(a,c,b){var d=new N(a.ma);Ec(a,function(e,f,g){d.Ea[f][g]=c.call(b,e,f,g,a)});return d}function Dc(a,c){for(var b=[],d=0;d<a;d++){b[d]=[];for(var e=0;e<c;e++)b[d][e]=0}return b}A=N.prototype;A.Ea=q;A.ma=q;A.add=function(a){if(!uc(this.ma,a.ma))j(Error("Matrix summation is only supported on arrays of equal size"));return Fc(this,function(c,b,d){return c+a.Ea[b][d]})};
function Gc(a,c,b){if(!(c>=0&&c<a.ma.height&&b>=0&&b<a.ma.width))return q;return a.Ea[c][b]}A.multiply=function(a){if(a instanceof N){if(this.ma.width!=a.ma.height)j(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns."));return Hc(this,a)}else if(ia(a))return Ic(this,a);else j(Error("A matrix can only be multiplied by a number or another matrix."))};
A.Ye=function(a){if(!uc(this.ma,a.ma))j(Error("Matrix subtraction is only supported on arrays of equal size."));return Fc(this,function(c,b,d){return c-a.Ea[b][d]})};function Jc(a){return a.Ea}A.toString=function(){var a=0;Ec(this,function(b){b=String(b).length;if(b>a)a=b});var c=[];Ka(this.Ea,function(b){c.push("[ ");Ka(b,function(d){d=String(d);c.push(Array(a-d.length+1).join(" ")+d+" ")});c.push("]\n")});return c.join("")};
function Hc(a,c){var b=new N(a.ma.height,c.ma.width);Ec(b,function(d,e,f){for(var g=d=0;g<this.ma.width;g++)d+=Gc(this,e,g)*Gc(c,g,f);if(!(e>=0&&e<b.ma.height&&f>=0&&f<b.ma.width))j(Error("Index out of bounds when setting matrix value, ("+e+","+f+") in size ("+b.ma.height+","+b.ma.width+")"));b.Ea[e][f]=d},a);return b}function Ic(a,c){return Fc(a,function(b){return b*c})};function Kc(a,c,b,d){this.Ze=a;this.af=c;this.$e=b;this.bf=d};function Lc(a,c){this.x=Number(a)||0;this.y=Number(c)||0}E(Lc,sc);Lc.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};Lc.prototype.Ye=function(a){this.x-=a.x;this.y-=a.y;return this};function Mc(){}E(Mc,Ta);A=Mc.prototype;A.of=p;A.Se=q;A.addEventListener=function(a,c,b,d){K(this,a,c,b,d)};A.removeEventListener=function(a,c,b,d){Rb(this,a,c,b,d)};
A.dispatchEvent=function(a){a=a;if(D(a))a=new I(a,this);else if(a instanceof I)a.target=a.target||this;else{var c=a;a=new I(a.type,this);Mb(a,c)}c=1;var b,d=a.type,e=J;if(d in e){e=e[d];d=p in e;var f;if(d){b=[];for(f=this;f;f=f.Se)b.push(f);f=e[p];f.hb=f.jb;for(var g=b.length-1;!a.Gc&&g>=0&&f.hb;g--){a.currentTarget=b[g];c&=Vb(f,b[g],a.type,p,a)&&a.Ud!=r}}if(r in e){f=e[r];f.hb=f.jb;if(d)for(g=0;!a.Gc&&g<b.length&&f.hb;g++){a.currentTarget=b[g];c&=Vb(f,b[g],a.type,r,a)&&a.Ud!=r}else for(b=this;!a.Gc&&
b&&f.hb;b=b.Se){a.currentTarget=b;c&=Vb(f,b,a.type,r,a)&&a.Ud!=r}}a=Boolean(c)}else a=p;return a};A.kb=function(){Mc.Wd.kb.call(this);Ub(this);this.Se=q};function Nc(a,c){this.ud=a||1;this.md=c||Oc;this.je=oa(this.nh,this);this.ve=qa()}E(Nc,Mc);Nc.prototype.enabled=r;var Oc=C.window;A=Nc.prototype;A.lc=q;A.nh=function(){if(this.enabled){var a=qa()-this.ve;if(a>0&&a<this.ud*0.8)this.lc=this.md.setTimeout(this.je,this.ud-a);else{this.dispatchEvent(Pc);if(this.enabled){this.lc=this.md.setTimeout(this.je,this.ud);this.ve=qa()}}}};A.start=function(){this.enabled=p;if(!this.lc){this.lc=this.md.setTimeout(this.je,this.ud);this.ve=qa()}};
A.stop=function(){this.enabled=r;if(this.lc){this.md.clearTimeout(this.lc);this.lc=q}};A.kb=function(){Nc.Wd.kb.call(this);this.stop();delete this.md};var Pc="tick";function Qc(a,c,b){a.style[Rc(b)]=c}var Sc={};function Rc(a){return Sc[a]||(Sc[a]=String(a).replace(/\-([a-z])/g,function(c,b){return b.toUpperCase()}))};var Tc=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Uc(a){return a.length==1?"0"+a:a};function Vc(){this.Ae=0;this.hc=[];this.ne=this.gd=0}Vc.prototype.Ce=0;function Wc(a,c){return a.x*c.x+a.y*c.y}function Xc(a,c){return new O(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function Yc(a,c){return new O(a.x+c.x,a.y+c.y)}function Zc(a,c){return new O(a.x-c.x,a.y-c.y)}function P(a){return a>0?a:-a}function Q(a,c){return a>c?a:c}function S(a,c,b){return Q(c,a<b?a:b)};function O(a,c){if(a===undefined)a=0;this.x=a;if(c===undefined)c=0;this.y=c}A=O.prototype;A.oa=function(){this.y=this.x=0};A.l=function(a,c){this.x=a;this.y=c};function T(a,c){a.x=c.x;a.y=c.y}A.od=function(){return new O(this.x,this.y)};function $c(a,c){a.x+=c.x;a.y+=c.y}function U(a,c){a.x*=c;a.y*=c}function ad(a,c){var b=a.x;a.x=c.a.x*b+c.b.x*a.y;a.y=c.a.y*b+c.b.y*a.y}A.mc=function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y)};function bd(a){return Math.sqrt(a.x*a.x+a.y*a.y)}
function cd(a){var c=bd(a);if(c<Number.MIN_VALUE)return 0;var b=1/c;a.x*=b;a.y*=b;return c}A.Nc=function(){return isFinite(this.x)&&isFinite(this.y)};function dd(){this.H=new O;this.F=new O}dd.prototype.Nc=function(){var a=this.F.x,c=this.F.y;a=this.F.x;c=this.F.y;a-=this.H.x;c-=this.H.y;return a=(a=a>=0&&c>=0)&&this.H.Nc()&&this.F.Nc()};function ed(){}ed.prototype={Ma:q,te:q,ue:0};function V(){}V.prototype={Ba:q,Fa:q,s:q,next:q};function fd(){}fd.prototype={ke:q,le:q,We:q};function gd(a,c){this.p=new V;this.r=new V;this.w=0;if(!a||!c)this.C=this.B=q;else{this.B=a;this.C=c;this.Aa=0;this.ia=Math.sqrt(this.B.ia*this.C.ia);this.ja=Q(this.B.ja,this.C.ja);this.o=this.L=q;this.p.Fa=q;this.p.s=q;this.p.next=q;this.p.Ba=q;this.r.Fa=q;this.r.s=q;this.r.next=q;this.r.Ba=q}}gd.prototype={oc:ba(q),Mc:aa("o"),Lc:x(),w:0,L:q,o:q,p:new V,r:new V,B:q,C:q,Aa:0,ia:q,ja:q};function hd(){}hd.prototype.hf=ba(q);hd.prototype.jf=x();function id(a,c){this.p=new V;this.r=new V;this.w=0;if(!a||!c)this.C=this.B=q;else{this.B=a;this.C=c;this.Aa=0;this.ia=Math.sqrt(this.B.ia*this.C.ia);this.ja=Q(this.B.ja,this.C.ja);this.o=this.L=q;this.p.Fa=q;this.p.s=q;this.p.next=q;this.p.Ba=q;this.r.Fa=q;this.r.s=q;this.r.next=q;this.r.Ba=q}}E(id,gd);id.prototype.Lc=x();id.prototype.oc=ba(q);var jd=Math.PI,kd=2/180*jd,ld=8/180*jd,md=2/180/1;function nd(){}nd.prototype={Fg:0,Bg:0,Cg:0,Ag:0,Dg:q};function od(){this.T=new nd;this.T.Dg=this}od.prototype={l:function(a){this.Xe(a.Nb)},od:function(){var a=new od;a.Xe(this.Nb);return a},Xe:function(a){this.Nb=a;this.T.Fg=this.Nb&255;this.T.Bg=(this.Nb&65280)>>8&255;this.T.Cg=(this.Nb&16711680)>>16&255;this.T.Ag=(this.Nb&4278190080)>>24&255},T:new nd,Nb:0};function pd(){this.position=new O;this.id=new od}pd.prototype={ib:q,la:q,ra:q};function qd(){this.X=Array(2);for(var a=0;a<2;a++)this.X[a]=new pd;this.G=new O}qd.prototype={X:q,G:q,U:0};function rd(){this.Db=new O;this.id=new od};function sd(a,c,b,d){var e=0,f=c[0].Db,g=c[1].Db,h=Wc(b,c[0].Db)-d;b=Wc(b,c[1].Db)-d;if(h<=0)a[e++]=c[0];if(b<=0)a[e++]=c[1];if(h*b<0){b=h/(h-b);d=a[e].Db;d.x=f.x+b*(g.x-f.x);d.y=f.y+b*(g.y-f.y);a[e].id=h>0?c[0].id:c[1].id;++e}return e}
function td(a,c,b){var d=a.A,e=b.Pa,f=b.A,g=a.db[c].x,h=a.db[c].y,i=g,k=a.d;g=k.a.x*i+k.b.x*h;h=k.a.y*i+k.b.y*h;var l=g,m=h;k=b.d;i=l*k.a.x+m*k.a.y;m=l*k.b.x+m*k.b.y;l=i;i=0;k=Number.MAX_VALUE;for(var n=0;n<e;++n){var o=f[n];o=o.x*l+o.y*m;if(o<k){k=o;i=n}}k=a.d;e=a.c.x+(k.a.x*d[c].x+k.b.x*d[c].y);a=a.c.y+(k.a.y*d[c].x+k.b.y*d[c].y);k=b.d;c=b.c.x+(k.a.x*f[i].x+k.b.x*f[i].y);b=b.c.y+(k.a.y*f[i].x+k.b.y*f[i].y);c-=e;b-=a;return c*g+b*h}
function ud(a,c,b,d){var e=c.Pa,f=b.c.x-c.c.x,g=b.c.y-c.c.y,h=f*c.d.a.x+g*c.d.a.y;g=f*c.d.b.x+g*c.d.b.y;f=0;for(var i=-Number.MAX_VALUE,k=0;k<e;++k){var l=c.db[k].x*h+c.db[k].y*g;if(l>i){i=l;f=k}}h=td(c,f,b);if(h>0&&d==r)return h;k=f-1>=0?f-1:e-1;l=td(c,k,b);if(l>0&&d==r)return l;var m=f+1<e?f+1:0,n=td(c,m,b);if(n>0&&d==r)return n;i=g=0;if(l>h&&l>n){i=-1;g=k;k=l}else if(n>h){i=1;g=m;k=n}else{a[0]=f;return h}for(;;){f=i==-1?g-1>=0?g-1:e-1:g+1<e?g+1:0;h=td(c,f,b);if(h>0&&d==r)return h;if(h>k){g=f;k=
h}else break}a[0]=g;return k}var vd=new O;function wd(a,c){this.p=new V;this.r=new V;this.w=0;if(!a||!c)this.C=this.B=q;else{this.B=a;this.C=c;this.Aa=0;this.ia=Math.sqrt(this.B.ia*this.C.ia);this.ja=Q(this.B.ja,this.C.ja);this.o=this.L=q;this.p.Fa=q;this.p.s=q;this.p.next=q;this.p.Ba=q;this.r.Fa=q;this.r.s=q;this.r.next=q;this.r.Ba=q;this.wa=[new qd];this.wa[0].U=0;this.wa[0].X[0].la=0;this.wa[0].X[0].ra=0}}Mb(wd.prototype,gd.prototype);
wd.prototype.Lc=function(){var a=this.wa[0],c=this.B,b=this.C;a.U=0;var d=b.c.x-c.c.x,e=b.c.y-c.c.y,f=d*d+e*e;c=c.I+b.I;if(!(f>c*c&&1)){if(f<Number.MIN_VALUE){f=-c;a.G.l(0,1)}else{var g=Math.sqrt(f);f=g-c;c=1/g;a.G.x=c*d;a.G.y=c*e}a.U=1;d=a.X[0];d.id.Xe(0);d.ib=f;d.position.x=b.c.x-b.I*a.G.x;d.position.y=b.c.y-b.I*a.G.y}this.Aa=this.wa[0].U>0?1:0};wd.prototype.oc=aa("wa");function xd(a,c){return new wd(a,c)}function yd(){};function zd(a,c){this.p=new V;this.r=new V;this.w=0;if(!a||!c)this.C=this.B=q;else{this.B=a;this.C=c;this.Aa=0;this.ia=Math.sqrt(this.B.ia*this.C.ia);this.ja=Q(this.B.ja,this.C.ja);this.o=this.L=q;this.p.Fa=q;this.p.s=q;this.p.next=q;this.p.Ba=q;this.r.Fa=q;this.r.s=q;this.r.next=q;this.r.Ba=q;this.wa=[new qd];if(this.B.qa!=Ad)j("Assert Failed!");if(this.C.qa!=Bd)j("Assert Failed!");this.wa[0].U=0;this.wa[0].X[0].la=0;this.wa[0].X[0].ra=0}}Mb(zd.prototype,gd.prototype);
zd.prototype.Lc=function(){a:{var a=this.wa[0],c=this.B,b=this.C;a.U=0;var d,e,f;e=b.c.x-c.c.x;f=b.c.y-c.c.y;var g=c.d,h=e*g.a.x+f*g.a.y;f=e*g.b.x+f*g.b.y;e=h;var i=0,k=-Number.MAX_VALUE;h=b.I;for(d=0;d<c.Pa;++d){var l=c.db[d].x*(e-c.A[d].x)+c.db[d].y*(f-c.A[d].y);if(l>h)break a;if(l>k){k=l;i=d}}if(k<Number.MIN_VALUE){a.U=1;f=c.db[i];a.G.x=g.a.x*f.x+g.b.x*f.y;a.G.y=g.a.y*f.x+g.b.y*f.y;d=a.X[0];d.id.T.Qc=i;d.id.T.uc=255;d.id.T.Td=255;d.id.T.me=0;d.position.x=b.c.x-h*a.G.x;d.position.y=b.c.y-h*a.G.y;
d.ib=k-h}else{i=i;k=i+1<c.Pa?i+1:0;var m=c.A[k].x-c.A[i].x;l=c.A[k].y-c.A[i].y;var n=Math.sqrt(m*m+l*l);m/=n;l/=n;if(n<Number.MIN_VALUE){e=e-c.A[i].x;f=f-c.A[i].y;c=Math.sqrt(e*e+f*f);e/=c;f/=c;if(!(c>h)){a.U=1;a.G.l(g.a.x*e+g.b.x*f,g.a.y*e+g.b.y*f);d=a.X[0];d.id.T.Qc=255;d.id.T.uc=i;d.id.T.Td=255;d.id.T.me=0;d.position.x=b.c.x-h*a.G.x;d.position.y=b.c.y-h*a.G.y;d.ib=c-h}}else{var o=(e-c.A[i].x)*m+(f-c.A[i].y)*l;d=a.X[0];d.id.T.Qc=255;d.id.T.uc=255;d.id.T.Td=255;d.id.T.me=0;if(o<=0){m=c.A[i].x;c=
c.A[i].y;d.id.T.uc=i}else if(o>=n){m=c.A[k].x;c=c.A[k].y;d.id.T.uc=k}else{m=m*o+c.A[i].x;c=l*o+c.A[i].y;d.id.T.Qc=i}e=e-m;f=f-c;c=Math.sqrt(e*e+f*f);e/=c;f/=c;if(!(c>h)){a.U=1;a.G.l(g.a.x*e+g.b.x*f,g.a.y*e+g.b.y*f);d.position.x=b.c.x-h*a.G.x;d.position.y=b.c.y-h*a.G.y;d.ib=c-h}}}}this.Aa=this.wa[0].U>0?1:0};zd.prototype.oc=aa("wa");function Cd(a,c){return new zd(a,c)}function Dd(){};function Ed(a,c){this.p=new V;this.r=new V;this.w=0;if(!a||!c)this.C=this.B=q;else{this.B=a;this.C=c;this.Aa=0;this.ia=Math.sqrt(this.B.ia*this.C.ia);this.ja=Q(this.B.ja,this.C.ja);this.o=this.L=q;this.p.Fa=q;this.p.s=q;this.p.next=q;this.p.Ba=q;this.r.Fa=q;this.r.s=q;this.r.next=q;this.r.Ba=q;this.Bd=new qd;this.wa=[new qd];this.wa[0].U=0}}E(Ed,gd);
Ed.prototype.Lc=function(){for(var a=this.wa[0],c=this.Bd.X,b=0;b<a.U;b++){var d=c[b],e=a.X[b];d.la=e.la;d.ra=e.ra;d.id=e.id.od()}this.Bd.U=a.U;b=this.B;var f=this.C;var g=a.U=0;c=[g];d=ud(c,b,f,r);g=c[0];if(!(d>0&&1)){var h=0;c=[h];var i=ud(c,f,b,r);h=c[0];if(!(i>0&&1)){c=e=0;if(i>0.98*d+0.0010){d=f;i=b;e=h;c=1}else{d=b;i=f;e=g;c=0}b=[new rd,new rd];f=e;g=i;var k=d.A;i=g.Pa;h=g.A;var l=k[f+1==d.Pa?0:f+1],m=l.x,n=l.y;l=k[f];m-=l.x;n-=l.y;l=m;m=n;n=-l;l=1/Math.sqrt(m*m+n*n);m*=l;n*=l;m=m;var o=n;l=
m;k=d.d;m=k.a.x*l+k.b.x*o;o=k.a.y*l+k.b.y*o;n=m;m=o;k=g.d;l=n*k.a.x+m*k.a.y;m=n*k.b.x+m*k.b.y;n=l;o=k=0;for(var t=Number.MAX_VALUE,y=0;y<i;++y){var u=y,s=y+1<i?y+1:0;l=h[s];var w=l.x,z=l.y;l=h[u];w-=l.x;z-=l.y;l=w;w=z;z=-l;l=1/Math.sqrt(w*w+z*z);w*=l;z*=l;l=w*n+z*m;if(l<t){t=l;k=u;o=s}}i=b[0];l=i.Db;T(l,h[k]);ad(l,g.d);$c(l,g.c);i.id.T.Td=f;i.id.T.Qc=k;i.id.T.uc=k;i=b[1];l=i.Db;T(l,h[o]);ad(l,g.d);$c(l,g.c);i.id.T.Td=f;i.id.T.Qc=k;i.id.T.uc=o;f=d.A;l=f[e];n=e+1<d.Pa?f[e+1]:f[0];g=n.x-l.x;h=n.y-l.y;
m=g;k=d.d;g=k.a.x*m+k.b.x*h;h=k.a.y*m+k.b.y*h;e=1/Math.sqrt(g*g+h*h);g*=e;h*=e;e=g;f=h;m=e;e=f;f=-m;i=l.x;o=l.y;m=i;k=d.d;i=k.a.x*m+k.b.x*o;o=k.a.y*m+k.b.y*o;i+=d.c.x;o+=d.c.y;l=n.x;n=n.y;m=l;k=d.d;l=k.a.x*m+k.b.x*n;n=k.a.y*m+k.b.y*n;l+=d.c.x;n+=d.c.y;d=e*i+f*o;m=-(g*i+h*o);l=g*l+h*n;n=[new rd,new rd];i=[new rd,new rd];k=0;vd.l(-g,-h);k=sd(n,b,vd,m);if(!(k<2)){vd.l(g,h);k=sd(i,n,vd,l);if(!(k<2)){c?a.G.l(-e,-f):a.G.l(e,f);for(g=b=0;g<2;++g){h=i[g].Db;h=e*h.x+f*h.y-d;if(h<=0){l=a.X[b];l.ib=h;T(l.position,
i[g].Db);l.id.l(i[g].id);l.id.T.me=c;++b}}a.U=b}}}}if(a.U>0){c=[r,r];for(b=0;b<a.U;++b){d=a.X[b];d.la=0;d.ra=0;e=d.id.key;for(f=0;f<this.Bd.U;++f)if(c[f]!=p){g=this.Bd.X[f];if(g.id.key==e){c[f]=p;d.la=g.la;d.ra=g.ra;break}}}this.Aa=1}else this.Aa=0};Ed.prototype.oc=aa("wa");function Fd(a,c){return new Ed(a,c)}function Gd(){};function Hd(a,c,b,d){W[b][d].ke=a;W[b][d].le=c;W[b][d].We=p;if(b!=d){W[d][b].ke=a;W[d][b].le=c;W[d][b].We=r}}var W=q,Id=r;function Jd(a){this.Ac=new id;this.P=a;this.Be=r}E(Jd,hd);
Jd.prototype.hf=function(a,c){var b=a,d=c,e=b.q,f=d.q;if((e.w&Kd)==Kd&&(f.w&Kd)==Kd)return this.Ac;if(b.q==d.q)return this.Ac;a:{for(var g=f.Ta;g!=q;g=g.next)if(g.Ba==e){e=g.Rc.xb==r;break a}e=r}if(e)return this.Ac;e=b.Zb==d.Zb&&b.Zb!=0?b.Zb>0:(b.Xa&d.Qa)!=0&&(b.Qa&d.Xa)!=0;if(e==r)return this.Ac;if(f.f==0){f=b;b=d;d=f}b=b;d=d;f=this.P.Cf;if(Id==r){W=Array(Ld);for(e=0;e<Ld;e++){W[e]=Array(Ld);for(g=0;g<Ld;g++)W[e][g]=new fd}Hd(xd,yd,Bd,Bd);Hd(Cd,Dd,Ad,Bd);Hd(Fd,Gd,Ad,Ad);Id=p}e=b.qa;g=d.qa;var h=
W[e][g].ke;if(h)if(W[e][g].We)d=h(b,d,f);else{d=h(d,b,f);for(b=0;b<d.Aa;++b){f=d.oc()[b];f.G=new O(-f.G.x,-f.G.y)}d=d}else d=q;if(d==q)return this.Ac;else{d.L=q;d.o=this.P.$;if(this.P.$!=q)this.P.$.L=d;this.P.$=d;this.P.yb++}return d};Jd.prototype.jf=function(a,c,b){if(b!=q)if(b!=this.Ac)if(this.Be==p)Md(this,b);else b.w|=2};
function Md(a,c){if(c.L)c.L.o=c.o;if(c.o)c.o.L=c.L;if(c==a.P.$)a.P.$=c.o;if(c.Aa>0){var b=c.B.q,d=c.C.q,e=c.p,f=c.r;Nd(b);Nd(d);if(e.s)e.s.next=e.next;if(e.next)e.next.s=e.s;if(e==b.$)b.$=e.next;e.s=q;e.next=q;if(f.s)f.s.next=f.next;if(f.next)f.next.s=f.s;if(f==d.$)d.$=f.next;f.s=q;f.next=q}b=a.P.Cf;if(c.Aa>0){Nd(c.B.q);Nd(c.C.q)}d=W[c.B.qa][c.C.qa].le;d(c,b);--a.P.yb};var Od=new (x());function Pd(){}Pd.prototype={kf:function(){this.status|=Qd},cg:function(){this.status&=~Qd},df:function(){return(this.status&Qd)==Qd},xg:function(){this.status|=Rd},dg:function(){this.status&=~Rd},lg:function(){return(this.status&Rd)==Rd},wg:function(){this.status|=Sd},ef:function(){return(this.status&Sd)==Sd},Ga:0,Ha:0,next:0,status:0};Pd.prototype.nf=q;var Qd=1,Rd=2,Sd=4;function Td(){}Td.prototype={Ga:0,Ha:0};function Ud(){var a=0;this.$b=Array(8192);for(a=0;a<8192;++a)this.$b[a]=65535;this.pa=Array(8192);for(a=0;a<8192;++a)this.pa[a]=new Pd;this.Va=Array(8192);for(a=0;a<8192;++a)this.Va[a]=new Td;for(a=0;a<8192;++a){this.pa[a].Ga=65535;this.pa[a].Ha=65535;this.pa[a].K=q;this.pa[a].status=0;this.pa[a].next=a+1}this.pa[8191].next=65535;this.Je=0}
Ud.prototype={kg:function(a,c){this.Na=a;this.ze=c},ae:function(a,c){var b=this.$f(a,c);if(b.df()==r){b.kf();this.Va[this.Ib].Ga=b.Ga;this.Va[this.Ib].Ha=b.Ha;++this.Ib}b.dg()},de:function(a,c){var b=Vd(this,a,c);if(b!=q){if(b.df()==r){b.kf();this.Va[this.Ib].Ga=b.Ga;this.Va[this.Ib].Ha=b.Ha;++this.Ib}b.xg()}},$f:function(a,c){if(a>c){var b=a;a=c;c=b}b=Wd(a,c)&8191;var d=Xd(this,a,c,b);if(d!=q)return d;var e=this.Id;d=this.pa[e];this.Id=d.next;d.Ga=a;d.Ha=c;d.status=0;d.K=q;d.next=this.$b[b];this.$b[b]=
e;++this.Je;return d},ug:function(a,c){if(a>c){var b=a;a=c;c=b}for(var d=Wd(a,c)&8191,e=this.$b[d],f=q;e!=65535;)if(this.pa[e].Ga==a&&this.pa[e].Ha==c){b=e;if(f)f.next=this.pa[e].next;else this.$b[d]=this.pa[e].next;d=this.pa[b];e=d.K;d.next=this.Id;d.Ga=65535;d.Ha=65535;d.K=q;d.status=0;this.Id=b;--this.Je;return e}else{f=this.pa[e];e=f.next}return q},Na:q,ze:q,Id:0,Je:0,Va:q,Ib:0,$b:q};function Vd(a,c,b){if(c>b){var d=c;c=b;b=d}return Xd(a,c,b,Wd(c,b)&8191)}
function Xd(a,c,b,d){for(d=a.$b[d];d!=65535&&(a.pa[d].Ga==c&&a.pa[d].Ha==b)==r;)d=a.pa[d].next;if(d==65535)return q;return a.pa[d]}
Ud.prototype.Kc=function(){var a=0,c=0,b=this.Na.xa,d=[];for(a=0;a<this.Ib;++a){var e=Vd(this,this.Va[a].Ga,this.Va[a].Ha);e.cg();var f=b[e.Ga],g=b[e.Ha];if(e.lg()){e.ef()==p&&this.ze.jf(f.K,g.K,e.K);this.Va[c].Ga=e.Ga;this.Va[c].Ha=e.Ha;++c}else if(e.ef()==r){e.nf=this.ze.hf(f.K,g.K);d.push(e.nf);e.wg()}}for(a=0;a<c;++a)this.ug(this.Va[a].Ga,this.Va[a].Ha);this.Ib=0;return d};
function Wd(a,c){var b=c<<16&4294901760|a;b=~b+(b<<15&4294934528);b^=b>>12&1048575;b+=b<<2&4294967292;b^=b>>4&268435455;b*=2057;b^=b>>16&65535;return b};function Yd(){}Yd.prototype={rc:function(){return(this.value&1)==0},ff:function(){return(this.value&1)==1},pd:function(a){var c=this.value,b=this.J,d=this.v;this.value=a.value;this.J=a.J;this.v=a.v;a.value=c;a.J=b;a.v=d},value:0,J:0,v:0};function Zd(){this.ua=[0,0];this.Ca=[0,0]}Zd.prototype={Mc:function(){return this.ua[0]},fe:function(a){this.ua[0]=a},Nc:function(){return this.ic!=65535},ua:[0,0],Ca:[0,0],ic:0,timeStamp:0,K:q};function $d(){this.Ad=[0,0];this.Xd=[0,0]};function ae(a,c){this.eb=new Ud;this.xa=Array(8192);this.Ra=Array(2048);this.Dc=Array(1024);this.dc=new O;var b=0;this.eb.kg(this,c);this.ga=a;for(b=this.Jb=0;b<1024;b++)this.Dc[b]=0;this.Ra=Array(2);for(b=0;b<2;b++){this.Ra[b]=Array(2048);for(var d=0;d<2048;d++)this.Ra[b][d]=new Yd}b=a.F.x;d=a.F.y;b-=a.H.x;d-=a.H.y;this.dc.x=65535/b;this.dc.y=65535/d;for(b=0;b<1023;++b){d=new Zd;this.xa[b]=d;d.fe(b+1);d.timeStamp=0;d.ic=65535;d.K=q}d=new Zd;this.xa[1023]=d;d.fe(65535);d.timeStamp=0;d.ic=65535;d.K=
q;this.Jd=0;this.Fc=1;this.Cb=0}
ae.prototype={qc:function(a){var c,b,d,e;c=a.H.x;b=a.H.y;c-=this.ga.F.x;b-=this.ga.F.y;d=this.ga.H.x;e=this.ga.H.y;d-=a.F.x;e-=a.F.y;c=Q(c,d);b=Q(b,e);return Q(c,b)<0},nc:function(a){for(var c=this.xa[a],b=2*this.Jb,d=0;d<2;++d){var e=this.Ra[d],f=c.ua[d],g=c.Ca[d],h=e[f].value,i=e[g].value,k=[],l=0,m=g-f-1,n,o;for(l=0;l<m;l++){k[l]=new Yd;n=k[l];o=e[f+1+l];n.value=o.value;n.J=o.J;n.v=o.v}m=k.length;var t=f;for(l=0;l<m;l++){o=k[l];n=e[t+l];n.value=o.value;n.J=o.J;n.v=o.v}k=[];m=b-g-1;for(l=0;l<m;l++){k[l]=
new Yd;n=k[l];o=e[g+1+l];n.value=o.value;n.J=o.J;n.v=o.v}m=k.length;t=g-1;for(l=0;l<m;l++){o=k[l];n=e[t+l];n.value=o.value;n.J=o.J;n.v=o.v}m=b-2;for(k=f;k<m;++k){l=this.xa[e[k].J];if(e[k].rc())l.ua[d]=k;else l.Ca[d]=k}m=g-1;for(f=f;f<m;++f)e[f].v--;this.Oc([0],[0],h,i,e,b-2,d)}for(b=0;b<this.Cb;++b)this.eb.de(a,this.Dc[b]);this.eb.Kc();this.Cb=0;this.ce();c.K=q;c.ic=65535;c.ua[0]=65535;c.ua[1]=65535;c.Ca[0]=65535;c.Ca[1]=65535;c.fe(this.Jd);this.Jd=a;--this.Jb},gf:function(a,c){var b=0,d=0,e,f,g=
0,h;if(!(a==65535||1024<=a))if(c.Nc()!=r){var i=2*this.Jb,k=this.xa[a],l=new $d;this.be(l.Ad,l.Xd,c);var m=new $d;for(b=0;b<2;++b){m.Ad[b]=this.Ra[b][k.ua[b]].value;m.Xd[b]=this.Ra[b][k.Ca[b]].value}for(b=0;b<2;++b){var n=this.Ra[b],o=k.ua[b],t=k.Ca[b],y=l.Ad[b],u=l.Xd[b],s=y-n[o].value,w=u-n[t].value;n[o].value=y;n[t].value=u;if(s<0)for(d=o;d>0&&y<n[d-1].value;){e=n[d];f=n[d-1];g=f.J;h=this.xa[f.J];f.v++;if(f.ff()==p){this.qd(l,h)&&this.eb.ae(a,g);h.Ca[b]++;e.v++}else{h.ua[b]++;e.v--}k.ua[b]--;e.pd(f);
--d}if(w>0)for(d=t;d<i-1&&n[d+1].value<=u;){e=n[d];f=n[d+1];g=f.J;h=this.xa[g];f.v++;if(f.rc()==p){this.qd(l,h)&&this.eb.ae(a,g);h.ua[b]--;e.v++}else{h.Ca[b]--;e.v--}k.Ca[b]++;e.pd(f);d++}if(s>0)for(d=o;d<i-1&&n[d+1].value<=y;){e=n[d];f=n[d+1];g=f.J;h=this.xa[g];f.v--;if(f.ff()){this.qd(m,h)&&this.eb.de(a,g);h.Ca[b]--;e.v--}else{h.ua[b]--;e.v++}k.ua[b]++;e.pd(f);d++}if(w<0)for(d=t;d>0&&u<n[d-1].value;){e=n[d];f=n[d-1];g=f.J;h=this.xa[g];f.v--;if(f.rc()==p){this.qd(m,h)&&this.eb.de(a,g);h.ua[b]++;
e.v--}else{h.Ca[b]++;e.v++}k.Ca[b]--;e.pd(f);d--}}}},tg:function(a,c,b){var d=[],e=[];this.be(d,e,a);a=[0];var f=[0];this.Oc(a,f,d[0],e[0],this.Ra[0],2*this.Jb,0);this.Oc(a,f,d[1],e[1],this.Ra[1],2*this.Jb,1);for(e=d=0;e<this.Cb&&d<b;++e,++d)c[e]=this.xa[this.Dc[e]].K;this.Cb=0;this.ce();return d},be:function(a,c,b){var d=b.H.x,e=b.H.y;d=d<this.ga.F.x?d:this.ga.F.x;e=e<this.ga.F.y?e:this.ga.F.y;d=Q(d,this.ga.H.x);e=Q(e,this.ga.H.y);var f=b.F.x;b=b.F.y;f=f<this.ga.F.x?f:this.ga.F.x;b=b<this.ga.F.y?
b:this.ga.F.y;f=Q(f,this.ga.H.x);b=Q(b,this.ga.H.y);a[0]=this.dc.x*(d-this.ga.H.x)&65534;c[0]=this.dc.x*(f-this.ga.H.x)&65535|1;a[1]=this.dc.y*(e-this.ga.H.y)&65534;c[1]=this.dc.y*(b-this.ga.H.y)&65535|1},qd:function(a,c){for(var b=0;b<2;++b){var d=this.Ra[b];if(a.Ad[b]>d[c.Ca[b]].value)return r;if(a.Xd[b]<d[c.ua[b]].value)return r}return p},Oc:function(a,c,b,d,e,f,g){b=be(e,f,b);d=be(e,f,d);for(f=b;f<d;++f)e[f].rc()&&this.cf(e[f].J);if(b>0){f=b-1;for(var h=e[f].v;h;){if(e[f].rc())if(b<=this.xa[e[f].J].Ca[g]){this.cf(e[f].J);
--h}--f}}a[0]=b;c[0]=d},cf:function(a){var c=this.xa[a];if(c.timeStamp<this.Fc){c.timeStamp=this.Fc;c.ic=1}else{c.ic=2;this.Dc[this.Cb]=a;++this.Cb}},ce:function(){if(this.Fc==65535){for(var a=0;a<1024;++a)this.xa[a].timeStamp=0;this.Fc=1}else++this.Fc},eb:new Ud,xa:Array(8192),Ra:Array(2048),Dc:Array(1024),Cb:0,ga:q,dc:new O,Jb:0,Fc:0};ae.prototype.Kc=function(){return this.eb.Kc()};
function ce(a,c,b){var d=0,e,f=a.Jd;e=a.xa[f];a.Jd=e.Mc();e.ic=0;e.K=b;b=2*a.Jb;e=[];var g=[];a.be(e,g,c);for(c=0;c<2;++c){var h=a.Ra[c],i=0,k=0;i=[i];k=[k];a.Oc(i,k,e[c],g[c],h,b,c);i=i[0];k=k[0];d=[];var l=0,m=b-k,n,o;for(l=0;l<m;l++){d[l]=new Yd;n=d[l];o=h[k+l];n.value=o.value;n.J=o.J;n.v=o.v}m=d.length;var t=k+2;for(l=0;l<m;l++){o=d[l];n=h[t+l];n.value=o.value;n.J=o.J;n.v=o.v}d=[];m=k-i;for(l=0;l<m;l++){d[l]=new Yd;n=d[l];o=h[i+l];n.value=o.value;n.J=o.J;n.v=o.v}m=d.length;t=i+1;for(l=0;l<m;l++){o=
d[l];n=h[t+l];n.value=o.value;n.J=o.J;n.v=o.v}++k;h[i].value=e[c];h[i].J=f;h[k].value=g[c];h[k].J=f;h[i].v=i==0?0:h[i-1].v;h[k].v=h[k-1].v;for(d=i;d<k;++d)h[d].v++;for(d=i;d<b+2;++d){i=a.xa[h[d].J];if(h[d].rc())i.ua[c]=d;else i.Ca[c]=d}}++a.Jb;for(b=0;b<a.Cb;++b)a.eb.ae(f,a.Dc[b]);a.eb.Kc();a.Cb=0;a.ce();return f}function be(a,c,b){var d=0;for(c=c-1;d<=c;){var e=Math.floor((d+c)/2);if(a[e].value>b)c=e-1;else if(a[e].value<b)d=e+1;else return e}return d};function X(a,c,b){if(a==q)a=0;this.a=new O;this.b=new O;if(c!=q&&b!=q){T(this.a,c);T(this.b,b)}else{c=Math.cos(a);a=Math.sin(a);this.a.x=c;this.b.x=-a;this.a.y=a;this.b.y=c}}A=X.prototype;A.l=function(a){var c=Math.cos(a);a=Math.sin(a);this.a.x=c;this.b.x=-a;this.a.y=a;this.b.y=c};A.od=function(){return new X(0,this.a,this.b)};function de(a,c){T(a.a,c.a);T(a.b,c.b)}function ee(a,c){a.a.x+=c.a.x;a.a.y+=c.a.y;a.b.x+=c.b.x;a.b.y+=c.b.y}A.oa=function(){this.a.x=0;this.b.x=0;this.a.y=0;this.b.y=0};
function fe(a,c){var b=a.a.x,d=a.b.x,e=a.a.y,f=a.b.y,g=b*f-d*e;g=1/g;c.a.x=g*f;c.b.x=-g*d;c.a.y=-g*e;c.b.y=g*b;return c}A.ge=function(a,c,b){var d=this.a.x,e=this.b.x,f=this.a.y,g=this.b.y,h=d*g-e*f;h=1/h;a.x=h*(g*c-e*b);a.y=h*(d*b-f*c);return a};A.mc=function(){this.a.mc();this.b.mc()};function ge(){this.ca=new O(0,0)}ge.prototype={fb:0,ca:new O(0,0),pc:0};function he(a,c){this.d=new X;this.c=new O;this.D=a.K;this.ia=a.lb;this.ja=a.rb;this.q=c;this.Y=65535;this.cc=0;this.Qa=a.Qa;this.Xa=a.Xa;this.Zb=a.tc}he.prototype={ee:x(),Mc:aa("o"),nc:function(){if(this.Y!=65535){this.q.P.Na.nc(this.Y);this.Y=65535}},he:x(),o:q,d:new X,c:new O,qa:0,D:q,q:q,ia:q,ja:q,cc:q,Y:0,Qa:0,Xa:0,Zb:0};var Bd=0,Ad=2,Ld=4;function ie(a,c,b){this.d=new X;this.c=new O;this.D=a.K;this.ia=a.lb;this.ja=a.rb;this.q=c;this.Y=65535;this.cc=0;this.Qa=a.Qa;this.Xa=a.Xa;this.Zb=a.tc;this.Oa=new O;this.Oa.l(a.ab.x-b.x,a.ab.y-b.y);this.qa=Bd;this.I=a.jc;de(this.d,this.q.d);a=this.d.a.x*this.Oa.x+this.d.b.x*this.Oa.y;c=this.d.a.y*this.Oa.x+this.d.b.y*this.Oa.y;this.c.x=this.q.c.x+a;this.c.y=this.q.c.y+c;this.cc=Math.sqrt(a*a+c*c)+this.I;a=new dd;a.H.l(this.c.x-this.I,this.c.y-this.I);a.F.l(this.c.x+this.I,this.c.y+this.I);c=this.q.P.Na;
this.Y=c.qc(a)?ce(c,a,this):65535;this.Y==65535&&je(this.q)}E(ie,he);ie.prototype.he=function(a,c,b,d){de(this.d,d);this.c.x=d.a.x*this.Oa.x+d.b.x*this.Oa.y+b.x;this.c.y=d.a.y*this.Oa.x+d.b.y*this.Oa.y+b.y;if(this.Y!=65535){b=a.x+(c.a.x*this.Oa.x+c.b.x*this.Oa.y);d=a.y+(c.a.y*this.Oa.x+c.b.y*this.Oa.y);a=Math.min(b,this.c.x);c=Math.min(d,this.c.y);b=Math.max(b,this.c.x);var e=Math.max(d,this.c.y);d=new dd;d.H.l(a-this.I,c-this.I);d.F.l(b+this.I,e+this.I);a=this.q.P.Na;a.qc(d)?a.gf(this.Y,d):je(this.q)}};
ie.prototype.ee=function(a){if(this.Y!=65535){a.nc(this.Y);var c=new dd;c.H.l(this.c.x-this.I,this.c.y-this.I);c.F.l(this.c.x+this.I,this.c.y+this.I);this.Y=a.qc(c)?ce(a,c,this):65535;this.Y==65535&&je(this.q)}};function ke(){this.Da=new X;this.ca=new O;this.ha=new O};function le(a,c,b){this.d=new X;this.c=new O;this.D=a.K;this.ia=a.lb;this.ja=a.rb;this.q=c;this.Y=65535;this.cc=0;this.Qa=a.Qa;this.Xa=a.Xa;this.Zb=a.tc;this.Ia=new dd;this.na=new X;this.za=new O;this.u=new ke;var d=0,e;c=new dd;this.A=Array(8);this.Xb=Array(8);this.db=Array(8);this.qa=Ad;var f=new X(a.we);if(a.type==1){this.za.x=a.ab.x-b.x;this.za.y=a.ab.y-b.y;this.Pa=4;b=a.ha.x;e=a.ha.y;d=Math.max(0,b-0.3);var g=Math.max(0,e-0.3);a=this.A[0]=new O;a.x=f.a.x*b+f.b.x*e;a.y=f.a.y*b+f.b.y*e;a=this.A[1]=
new O;a.x=f.a.x*-b+f.b.x*e;a.y=f.a.y*-b+f.b.y*e;a=this.A[2]=new O;a.x=f.a.x*-b+f.b.x*-e;a.y=f.a.y*-b+f.b.y*-e;a=this.A[3]=new O;a.x=f.a.x*b+f.b.x*-e;a.y=f.a.y*b+f.b.y*-e;a=this.Xb[0]=new O;a.x=f.a.x*d+f.b.x*g;a.y=f.a.y*d+f.b.y*g;a=this.Xb[1]=new O;a.x=f.a.x*-d+f.b.x*g;a.y=f.a.y*-d+f.b.y*g;a=this.Xb[2]=new O;a.x=f.a.x*-d+f.b.x*-g;a.y=f.a.y*-d+f.b.y*-g;a=this.Xb[3]=new O;a.x=f.a.x*d+f.b.x*-g;a.y=f.a.y*d+f.b.y*-g}else{this.Pa=a.$d;d=a.Jc;e=a.$d;for(var h=g=0,i=0,k=1/3,l=0;l<e;++l){var m=d[l].x,n=d[l].y,
o=l+1<e?d[l+1].x:d[0].x,t=l+1<e?d[l+1].y:d[0].y,y=0.5*((m-0)*(t-0)-(n-0)*(o-0));i+=y;g+=y*k*(0+m+o);h+=y*k*(0+n+t)}g*=1/i;h*=1/i;me.l(g,h);g=me.x;h=me.y;this.za.x=a.ab.x+(f.a.x*g+f.b.x*h)-b.x;this.za.y=a.ab.y+(f.a.y*g+f.b.y*h)-b.y;for(d=0;d<this.Pa;++d){this.A[d]=new O;this.Xb[d]=new O;b=a.Jc[d].x-g;e=a.Jc[d].y-h;this.A[d].x=f.a.x*b+f.b.x*e;this.A[d].y=f.a.y*b+f.b.y*e;b=this.A[d].x;e=this.A[d].y;i=Math.sqrt(b*b+e*e);if(i>Number.MIN_VALUE){b*=1/i;e*=1/i}this.Xb[d].x=this.A[d].x-0.3*b;this.Xb[d].y=
this.A[d].y-0.3*e}}a=f=Number.MAX_VALUE;b=-Number.MAX_VALUE;e=-Number.MAX_VALUE;for(d=this.cc=0;d<this.Pa;++d){g=this.A[d];f=Math.min(f,g.x);a=Math.min(a,g.y);b=Math.max(b,g.x);e=Math.max(e,g.y);this.cc=Math.max(this.cc,bd(g))}d=this.u.Da;d.a.x=1;d.b.x=0;d.a.y=0;d.b.y=1;this.u.ca.l((f+b)*0.5,(a+e)*0.5);this.u.ha.l((b-f)*0.5,(e-a)*0.5);for(d=a=f=0;d<this.Pa;++d){this.db[d]=new O;f=d;a=d+1<this.Pa?d+1:0;this.db[d].x=this.A[a].y-this.A[f].y;this.db[d].y=-(this.A[a].x-this.A[f].x);cd(this.db[d])}for(d=
0;d<this.Pa;++d);de(this.d,this.q.d);this.c.x=this.q.c.x+(this.d.a.x*this.za.x+this.d.b.x*this.za.y);this.c.y=this.q.c.y+(this.d.a.y*this.za.x+this.d.b.y*this.za.y);ne.a.x=this.d.a.x*this.u.Da.a.x+this.d.b.x*this.u.Da.a.y;ne.a.y=this.d.a.y*this.u.Da.a.x+this.d.b.y*this.u.Da.a.y;ne.b.x=this.d.a.x*this.u.Da.b.x+this.d.b.x*this.u.Da.b.y;ne.b.y=this.d.a.y*this.u.Da.b.x+this.d.b.y*this.u.Da.b.y;ne.mc();b=ne.a.x*this.u.ha.x+ne.b.x*this.u.ha.y;e=ne.a.y*this.u.ha.x+ne.b.y*this.u.ha.y;f=this.c.x+(this.d.a.x*
this.u.ca.x+this.d.b.x*this.u.ca.y);a=this.c.y+(this.d.a.y*this.u.ca.x+this.d.b.y*this.u.ca.y);c.H.x=f-b;c.H.y=a-e;c.F.x=f+b;c.F.y=a+e;f=this.q.P.Na;this.Y=f.qc(c)?ce(f,c,this):65535;this.Y==65535&&je(this.q)}E(le,he);le.prototype.Ia=new dd;le.prototype.na=new X;
le.prototype.he=function(a,c,b,d){de(this.d,d);this.c.x=this.q.c.x+(d.a.x*this.za.x+d.b.x*this.za.y);this.c.y=this.q.c.y+(d.a.y*this.za.x+d.b.y*this.za.y);if(this.Y!=65535){var e,f;e=c.a;f=c.b;var g=this.u.Da.a,h=this.u.Da.b;this.na.a.x=e.x*g.x+f.x*g.y;this.na.a.y=e.y*g.x+f.y*g.y;this.na.b.x=e.x*h.x+f.x*h.y;this.na.b.y=e.y*h.x+f.y*h.y;this.na.mc();e=this.za.x+this.u.ca.x;f=this.za.y+this.u.ca.y;g=a.x+(c.a.x*e+c.b.x*f);a=a.y+(c.a.y*e+c.b.y*f);e=this.na.a.x*this.u.ha.x+this.na.b.x*this.u.ha.y;f=this.na.a.y*
this.u.ha.x+this.na.b.y*this.u.ha.y;this.Ia.H.x=g-e;this.Ia.H.y=a-f;this.Ia.F.x=g+e;this.Ia.F.y=a+f;e=d.a;f=d.b;g=this.u.Da.a;h=this.u.Da.b;this.na.a.x=e.x*g.x+f.x*g.y;this.na.a.y=e.y*g.x+f.y*g.y;this.na.b.x=e.x*h.x+f.x*h.y;this.na.b.y=e.y*h.x+f.y*h.y;this.na.mc();e=this.za.x+this.u.ca.x;f=this.za.y+this.u.ca.y;g=b.x+(d.a.x*e+d.b.x*f);a=b.y+(d.a.y*e+d.b.y*f);e=this.na.a.x*this.u.ha.x+this.na.b.x*this.u.ha.y;f=this.na.a.y*this.u.ha.x+this.na.b.y*this.u.ha.y;this.Ia.H.x=Math.min(this.Ia.H.x,g-e);this.Ia.H.y=
Math.min(this.Ia.H.y,a-f);this.Ia.F.x=Math.max(this.Ia.F.x,g+e);this.Ia.F.y=Math.max(this.Ia.F.y,a+f);b=this.q.P.Na;b.qc(this.Ia)?b.gf(this.Y,this.Ia):je(this.q)}};
le.prototype.ee=function(a){if(this.Y!=65535){a.nc(this.Y);var c=new X(0,Xc(this.d,this.u.Da.a),Xc(this.d,this.u.Da.b));c=new X(0,new O(P(c.a.x),P(c.a.y)),new O(P(c.b.x),P(c.b.y)));c=Xc(c,this.u.ha);var b=Xc(this.d,this.u.ca);$c(b,this.c);var d=new dd;T(d.H,b);var e=d.H;e.x-=c.x;e.y-=c.y;T(d.F,b);$c(d.F,c);this.Y=a.qc(d)?ce(a,d,this):65535;this.Y==65535&&je(this.q)}};var me=new O,ne=new X;function oe(a,c){this.Tf=new X;this.c=new O;T(this.c,a.position);this.Ke=new O;T(this.Ke,this.c);var b=0,d,e;this.w=0;this.n=a.rotation;this.d=new X(0);this.d.l(this.n);this.Mf=this.n;this.P=c;this.$g=S(1-a.xf,0,1);this.Qg=S(1-a.lf,0,1);this.Zc=new O(0,0);this.Ka=this.Of=0;var f=Array(64);for(b=0;b<64;b++)f[b]=new ge;this.ed=0;this.Eb=new O(0,0);for(b=0;b<64;++b){d=a.Ic[b];if(d==q)break;e=f[b];var g=d,h=e;h.ca=new O(0,0);if(g.Rb==0){h.fb=0;h.ca.l(0,0);h.pc=0}switch(g.type){case Bd:h.fb=g.Rb*jd*g.jc*
g.jc;h.ca.l(0,0);h.pc=0.5*h.fb*g.jc*g.jc;break;case 1:h.fb=4*g.Rb*g.ha.x*g.ha.y;h.ca.l(0,0);h.pc=h.fb/3*Wc(g.ha,g.ha);break;case Ad:h=h;var i=g.Jc,k=g.$d;g=g.Rb;var l=new O;l.oa();for(var m=0,n=0,o=new O(0,0),t=1/3,y=0;y<k;++y){var u=o,s=i[y],w=y+1<k?i[y+1]:i[0],z=Zc(s,u),v=Zc(w,u),F=z.x*v.y-z.y*v.x,B=0.5*F;m+=B;var M=new O;T(M,u);$c(M,s);$c(M,w);U(M,t*B);$c(l,M);s=u.x;u=u.y;w=z.x;z=z.y;B=v.x;v=v.y;n+=F*(t*(0.25*(w*w+B*w+B*B)+(s*w+s*B))+0.5*s*s+(t*(0.25*(z*z+v*z+v*v)+(u*z+u*v))+0.5*u*u))}h.fb=g*m;
U(l,1/m);h.ca=l;n=g*(n-m*Wc(l,l));h.pc=n;break;default:h.fb=0;h.ca.l(0,0);h.pc=0}this.Ka+=e.fb;this.Eb.x+=e.fb*(d.ab.x+e.ca.x);this.Eb.y+=e.fb*(d.ab.y+e.ca.y);++this.ed}if(this.Ka>0){U(this.Eb,1/this.Ka);$c(this.c,Xc(this.d,this.Eb))}else this.w|=Kd;for(b=this.Uc=0;b<this.ed;++b){d=a.Ic[b];e=f[b];this.Uc+=e.pc;d=Zc(Yc(d.ab,e.ca),this.Eb);this.Uc+=e.fb*Wc(d,d)}this.f=this.Ka>0?1/this.Ka:0;if(this.Uc>0&&a.kh==r)this.m=1/this.Uc;else this.m=this.Uc=0;this.e=Yc(a.Pg,new O(-a.ie*this.Eb.y,a.ie*this.Eb.x));
this.g=a.ie;this.gc=this.o=this.L=this.$=this.Ta=q;for(b=0;b<this.ed;++b){d=a.Ic[b];a:{e=d;f=this.Eb;switch(e.type){case Bd:e=new ie(e,this,f);break a;case 1:case Ad:e=new le(e,this,f);break a}e=q}e.o=this.gc;this.gc=e}this.Ec=0;if(a.Ig)this.w|=pe;if(a.Og)this.w|=qe;if(this.w&qe||this.f==0){this.e.l(0,0);this.g=0}this.D=a.K}function Nd(a){a.w&=~qe;a.Ec=0}oe.prototype.Mc=aa("o");function je(a){a.w|=re;a.e.oa();a.g=0;for(a=a.gc;a!=q;a=a.o)a.nc()}var Kd=1,re=2,qe=8,pe=16;function se(){this.xd=new O;this.yd=new O}se.prototype={la:q,ra:q,ld:q,Re:q,Vf:q,ib:q,Zd:q};function te(){this.G=new O;this.X=Array(2);for(var a=0;a<2;a++)this.X[a]=new se}te.prototype={Pf:q,Za:q,$a:q,lb:q,rb:q,U:0};function ue(a,c,b){this.Wb=[];this.Dd=b;b=0;var d,e;for(b=this.Vb=0;b<c;++b)this.Vb+=a[b].Aa;for(b=0;b<this.Vb;b++)this.Wb[b]=new te;var f=0;for(b=0;b<c;++b){var g=a[b],h=g.B.q,i=g.C.q,k=g.Aa,l=g.oc(),m=g.ia;g=g.ja;for(var n=h.e.x,o=h.e.y,t=i.e.x,y=i.e.y,u=h.g,s=i.g,w=0;w<k;++w){var z=l[w],v=z.G.x,F=z.G.y,B=this.Wb[f];B.Za=h;B.$a=i;B.Pf=z;B.G.x=v;B.G.y=F;B.U=z.U;B.lb=m;B.rb=g;for(var M=0;M<B.U;++M){var G=z.X[M],R=B.X[M];R.la=G.la;R.ra=G.ra;R.ib=G.ib;var fa=G.position.x-h.c.x,za=G.position.y-h.c.y,
Aa=G.position.x-i.c.x;G=G.position.y-i.c.y;d=R.xd;e=h.d;d.x=fa*e.a.x+za*e.a.y;d.y=fa*e.b.x+za*e.b.y;d=R.yd;e=i.d;d.x=Aa*e.a.x+G*e.a.y;d.y=Aa*e.b.x+G*e.b.y;d=fa*fa+za*za;e=Aa*Aa+G*G;var pb=fa*v+za*F,ra=Aa*v+G*F,sa=h.f+i.f;sa+=h.m*(d-pb*pb)+i.m*(e-ra*ra);R.Re=1/sa;ra=F;sa=-v;pb=fa*ra+za*sa;ra=Aa*ra+G*sa;sa=h.f+i.f;sa+=h.m*(d-pb*pb)+i.m*(e-ra*ra);R.Vf=1/sa;R.Zd=0;if(R.ib>0)R.Zd=-60*R.ib;fa=B.G.x*(t+-s*G-n- -u*za)+B.G.y*(y+s*Aa-o-u*fa);if(fa<-30)R.Zd+=-B.rb*fa}++f}}}
ue.prototype={sg:function(){for(var a,c,b=0;b<this.Vb;++b){var d=this.Wb[b],e=d.Za,f=d.$a,g=e.f,h=e.m,i=f.f,k=f.m,l=d.G.x,m=d.G.y,n=m,o=-l,t=0,y=0;if(ve){y=d.U;for(t=0;t<y;++t){var u=d.X[t],s=u.la*l+u.ra*n,w=u.la*m+u.ra*o;c=e.d;a=u.xd;var z=c.a.x*a.x+c.b.x*a.y,v=c.a.y*a.x+c.b.y*a.y;c=f.d;a=u.yd;var F=c.a.x*a.x+c.b.x*a.y;a=c.a.y*a.x+c.b.y*a.y;e.g-=h*(z*w-v*s);e.e.x-=g*s;e.e.y-=g*w;f.g+=k*(F*w-a*s);f.e.x+=i*s;f.e.y+=i*w;u.ld=0}}else{y=d.U;for(t=0;t<y;++t){e=d.X[t];e.la=0;e.ra=0;e.ld=0}}}},tb:function(){for(var a=
0,c,b,d,e,f,g,h,i,k=0;k<this.Vb;++k){var l=this.Wb[k],m=l.Za,n=l.$a,o=m.g,t=m.e,y=n.g,u=n.e,s=m.f,w=m.m,z=n.f,v=n.m,F=l.G.x,B=l.G.y,M=B,G=-F,R=l.U;for(a=0;a<R;++a){c=l.X[a];f=m.d;g=c.xd;b=f.a.x*g.x+f.b.x*g.y;d=f.a.y*g.x+f.b.y*g.y;f=n.d;g=c.yd;e=f.a.x*g.x+f.b.x*g.y;f=f.a.y*g.x+f.b.y*g.y;g=u.x+-y*f-t.x- -o*d;h=u.y+y*e-t.y-o*b;g=-c.Re*(g*F+h*B-c.Zd);h=Q(c.la+g,0);g=h-c.la;i=g*F;g=g*B;t.x-=s*i;t.y-=s*g;o-=w*(b*g-d*i);u.x+=z*i;u.y+=z*g;y+=v*(e*g-f*i);c.la=h;g=u.x+-y*f-t.x- -o*d;h=u.y+y*e-t.y-o*b;g=c.Vf*
-(g*M+h*G);h=l.lb*c.la;h=S(c.ra+g,-h,h);g=h-c.ra;i=g*M;g=g*G;t.x-=s*i;t.y-=s*g;o-=w*(b*g-d*i);u.x+=z*i;u.y+=z*g;y+=v*(e*g-f*i);c.ra=h}m.g=o;n.g=y}},sb:function(a){for(var c=0,b,d,e=0;e<this.Vb;++e){for(var f=this.Wb[e],g=f.Za,h=f.$a,i=g.c,k=g.n,l=h.c,m=h.n,n=g.f,o=g.m,t=h.f,y=h.m,u=f.G.x,s=f.G.y,w=f.U,z=0;z<w;++z){var v=f.X[z];b=g.d;d=v.xd;var F=b.a.x*d.x+b.b.x*d.y,B=b.a.y*d.x+b.b.y*d.y;b=h.d;d=v.yd;var M=b.a.x*d.x+b.b.x*d.y;b=b.a.y*d.x+b.b.y*d.y;d=(l.x+M-(i.x+F))*u+(l.y+b-(i.y+B))*s+v.ib;c=c<d?c:
d;d=-v.Re*a*S(d+0.15,-6,0);var G=v.ld;v.ld=Q(G+d,0);d=v.ld-G;v=d*u;d=d*s;i.x-=n*v;i.y-=n*d;k-=o*(F*d-B*v);g.d.l(k);l.x+=t*v;l.y+=t*d;m+=y*(M*d-b*v);h.d.l(m)}g.n=k;h.n=m}return c>=-0.15},rg:function(){for(var a=0;a<this.Vb;++a)for(var c=this.Wb[a],b=c.Pf,d=0;d<c.U;++d){var e=b.X[d],f=c.X[d];e.la=f.la;e.ra=f.ra}},Dd:q,Wb:[],Vb:0};function we(a,c,b,d){var e=0;this.Rg=a;this.Sg=c;this.Yg=b;this.cb=this.yb=this.ya=0;this.mb=Array(a);for(e=0;e<a;e++)this.mb[e]=q;this.Gd=Array(c);for(e=0;e<c;e++)this.Gd[e]=q;this.yc=Array(b);for(e=0;e<b;e++)this.yc[e]=q;this.Dd=d}
we.prototype={bg:function(){this.cb=this.yb=this.ya=0},ge:function(a,c){var b=0,d;for(b=0;b<this.ya;++b){d=this.mb[b];if(d.f!=0){$c(d.e,new O(a.Ma*Yc(c,new O(d.f*d.Zc.x,d.f*d.Zc.y)).x,a.Ma*Yc(c,new O(d.f*d.Zc.x,d.f*d.Zc.y)).y));d.g+=a.Ma*d.m*d.Of;U(d.e,d.$g);d.g*=d.Qg;T(d.Ke,d.c);d.Mf=d.n}}var e=new ue(this.Gd,this.yb,this.Dd);e.sg();for(b=0;b<this.cb;++b)this.yc[b].Mb();for(b=0;b<a.ue;++b){e.tb();for(d=0;d<this.cb;++d)this.yc[d].tb(a)}for(b=0;b<this.ya;++b){d=this.mb[b];if(d.f!=0){d.c.x+=a.Ma*d.e.x;
d.c.y+=a.Ma*d.e.y;d.n+=a.Ma*d.g;d.d.l(d.n)}}for(b=0;b<this.cb;++b);if(xe)for(ye=0;ye<a.ue;++ye){d=e.sb(0.2);var f=p;for(b=0;b<this.cb;++b){var g=this.yc[b].sb();f=f&&g}if(d&&f)break}e.rg();for(b=0;b<this.ya;++b){d=this.mb[b];if(d.f!=0){d.d.l(d.n);e=d;e.Tf.l(e.Mf);for(f=e.gc;f!=q;f=f.o)f.he(e.Ke,e.Tf,e.c,e.d);d.Zc.l(0,0);d.Of=0}}},yg:function(a){var c=0,b,d=Number.MAX_VALUE,e=md*md;for(c=0;c<this.ya;++c){b=this.mb[c];if(b.f!=0){if((b.w&pe)==0)d=b.Ec=0;if((b.w&pe)==0||b.g*b.g>e||Wc(b.e,b.e)>0.09)d=
b.Ec=0;else{b.Ec+=a;d=d<b.Ec?d:b.Ec}}}if(d>=0.5)for(c=0;c<this.ya;++c){b=this.mb[c];b.w|=qe}},Xf:function(a){this.mb[this.ya++]=a},Yf:function(a){this.Gd[this.yb++]=a},Zf:function(a){this.yc[this.cb++]=a},Dd:q,mb:q,Gd:q,yc:q,ya:0,cb:0,yb:0,Rg:0,Sg:0,Yg:0};var ye=0;function Y(){}Y.prototype={Ba:q,Rc:q,s:q,next:q};function ze(a){this.p=new Y;this.r=new Y;this.qa=a.type;this.o=this.L=q;this.k=a.Za;this.h=a.$a;this.xb=a.sc;this.ob=r;this.D=a.K}ze.prototype={Mc:aa("o"),Mb:x(),tb:x(),sb:ba(r),qa:0,L:q,o:q,p:new Y,r:new Y,k:q,h:q,ob:q,xb:q,D:q};function Ae(a){this.p=new Y;this.r=new Y;this.qa=a.type;this.o=this.L=q;this.k=a.Za;this.h=a.$a;this.xb=a.sc;this.ob=r;this.D=a.K;this.Ja=new X;this.sa=new X;this.ta=new X;this.Ya=new X;this.i=new O;this.j=new O;this.Wa=new O;this.Kb=new X;var c,b,d;c=this.k.d;b=a.Ob.x-this.k.c.x;d=a.Ob.y-this.k.c.y;this.i.x=b*c.a.x+d*c.a.y;this.i.y=b*c.b.x+d*c.b.y;c=this.h.d;b=a.Ob.x-this.h.c.x;d=a.Ob.y-this.h.c.y;this.j.x=b*c.a.x+d*c.a.y;this.j.y=b*c.b.x+d*c.b.y;this.Ff=this.h.n-this.k.n;this.Wa.l(0,0);this.da=
this.t=this.ea=0;this.Ge=a.vh;this.Ne=a.Fh;this.Kf=a.Ch;this.Ie=a.fh;this.zb=a.Lg;this.wc=a.Mg}Mb(Ae.prototype,ze.prototype);function Be(a){return a.h.n-a.k.n}new X;A=Ae.prototype;A.sa=new X;A.ta=new X;A.Ya=new X;
A.Mb=function(){var a=this.k,c=this.h,b;b=a.d;var d=b.a.x*this.i.x+b.b.x*this.i.y,e=b.a.y*this.i.x+b.b.y*this.i.y;b=c.d;var f=b.a.x*this.j.x+b.b.x*this.j.y;b=b.a.y*this.j.x+b.b.y*this.j.y;var g=a.f,h=c.f,i=a.m,k=c.m;this.sa.a.x=g+h;this.sa.b.x=0;this.sa.a.y=0;this.sa.b.y=g+h;this.ta.a.x=i*e*e;this.ta.b.x=-i*d*e;this.ta.a.y=-i*d*e;this.ta.b.y=i*d*d;this.Ya.a.x=k*b*b;this.Ya.b.x=-k*f*b;this.Ya.a.y=-k*f*b;this.Ya.b.y=k*f*f;de(this.Ja,this.sa);ee(this.Ja,this.ta);ee(this.Ja,this.Ya);fe(this.Ja,this.Kb);
this.La=1/(i+k);if(this.wc==r)this.ea=0;if(this.zb){var l=c.n-a.n-this.Ff;if(P(this.Ne-this.Ge)<2*kd)this.Q=3;else if(l<=this.Ge){if(this.Q!=1)this.t=0;this.Q=1}else if(l>=this.Ne){if(this.Q!=2)this.t=0;this.Q=2}else this.t=this.Q=0}else this.t=0;if(ve){a.e.x-=g*this.Wa.x;a.e.y-=g*this.Wa.y;a.g-=i*(d*this.Wa.y-e*this.Wa.x+this.ea+this.t);c.e.x+=h*this.Wa.x;c.e.y+=h*this.Wa.y;c.g+=k*(f*this.Wa.y-b*this.Wa.x+this.ea+this.t)}else{this.Wa.oa();this.t=this.ea=0}this.da=0};
A.tb=function(a){var c=this.k,b=this.h,d;d=c.d;var e=d.a.x*this.i.x+d.b.x*this.i.y,f=d.a.y*this.i.x+d.b.y*this.i.y;d=b.d;var g=d.a.x*this.j.x+d.b.x*this.j.y;d=d.a.y*this.j.x+d.b.y*this.j.y;var h=b.e.x+-b.g*d-c.e.x- -c.g*f,i=b.e.y+b.g*g-c.e.y-c.g*e,k=-(this.Kb.a.x*h+this.Kb.b.x*i);h=-(this.Kb.a.y*h+this.Kb.b.y*i);this.Wa.x+=k;this.Wa.y+=h;c.e.x-=c.f*k;c.e.y-=c.f*h;c.g-=c.m*(e*h-f*k);b.e.x+=b.f*k;b.e.y+=b.f*h;b.g+=b.m*(g*h-d*k);if(this.wc&&this.Q!=3){e=-this.La*(b.g-c.g-this.Ie);f=this.ea;this.ea=S(this.ea+
e,-a.Ma*this.Kf,a.Ma*this.Kf);e=this.ea-f;c.g-=c.m*e;b.g+=b.m*e}if(this.zb&&this.Q!=0){e=-this.La*(b.g-c.g);if(this.Q==3)this.t+=e;else if(this.Q==1){a=this.t;this.t=Q(this.t+e,0);e=this.t-a}else if(this.Q==2){a=this.t;this.t=this.t+e<0?this.t+e:0;e=this.t-a}c.g-=c.m*e;b.g+=b.m*e}};
A.sb=function(){var a,c=this.k,b=this.h,d=0;d=c.d;var e=d.a.x*this.i.x+d.b.x*this.i.y,f=d.a.y*this.i.x+d.b.y*this.i.y;d=b.d;a=d.a.x*this.j.x+d.b.x*this.j.y;var g=d.a.y*this.j.x+d.b.y*this.j.y,h=b.c.x+a-(c.c.x+e),i=b.c.y+g-(c.c.y+f);d=Math.sqrt(h*h+i*i);var k=c.f,l=b.f,m=c.m,n=b.m;this.sa.a.x=k+l;this.sa.b.x=0;this.sa.a.y=0;this.sa.b.y=k+l;this.ta.a.x=m*f*f;this.ta.b.x=-m*e*f;this.ta.a.y=-m*e*f;this.ta.b.y=m*e*e;this.Ya.a.x=n*g*g;this.Ya.b.x=-n*a*g;this.Ya.a.y=-n*a*g;this.Ya.b.y=n*a*a;de(this.Ja,this.sa);
ee(this.Ja,this.ta);ee(this.Ja,this.Ya);this.Ja.ge(Ce,-h,-i);h=Ce.x;i=Ce.y;c.c.x-=c.f*h;c.c.y-=c.f*i;c.n-=c.m*(e*i-f*h);c.d.l(c.n);b.c.x+=b.f*h;b.c.y+=b.f*i;b.n+=b.m*(a*i-g*h);b.d.l(b.n);e=0;if(this.zb&&this.Q!=0){a=b.n-c.n-this.Ff;f=0;if(this.Q==3){a=S(a,-ld,ld);f=-this.La*a;e=P(a)}else if(this.Q==1){a=a-this.Ge;e=Q(0,-a);a=S(a+kd,-ld,0);f=-this.La*a;a=this.da;this.da=Q(this.da+f,0);f=this.da-a}else if(this.Q==2){a=a-this.Ne;e=Q(0,a);a=S(a-kd,0,ld);f=-this.La*a;a=this.da;this.da=this.da+f<0?this.da+
f:0;f=this.da-a}c.n-=c.m*f;c.d.l(c.n);b.n+=b.m*f;b.d.l(b.n)}return d<=0.15&&e<=kd};var Ce=new O;function De(){this.M=new O;this.N=new O}De.prototype={M:new O,aa:q,N:new O,ba:q,oa:function(){this.M.oa();this.aa=0;this.N.oa();this.ba=0},l:function(a,c,b,d){T(this.M,a);this.aa=c;T(this.N,b);this.ba=d},nd:function(a,c,b,d){return this.M.x*a.x+this.M.y*a.y+this.aa*c+(this.N.x*b.x+this.N.y*b.y)+this.ba*d}};function Ee(a){this.p=new Y;this.r=new Y;this.qa=a.type;this.o=this.L=q;this.k=a.Za;this.h=a.$a;this.xb=a.sc;this.ob=r;this.D=a.K;this.i=new O;this.j=new O;this.va=new O;this.qb=new O;this.O=new De;this.z=new De;var c,b,d;c=this.k.d;b=a.Ob.x-this.k.c.x;d=a.Ob.y-this.k.c.y;this.i.l(b*c.a.x+d*c.a.y,b*c.b.x+d*c.b.y);c=this.h.d;b=a.Ob.x-this.h.c.x;d=a.Ob.y-this.h.c.y;this.j.l(b*c.a.x+d*c.a.y,b*c.b.x+d*c.b.y);c=this.k.d;b=a.axis.x;d=a.axis.y;this.va.l(b*c.a.x+d*c.a.y,b*c.b.x+d*c.b.y);this.qb.x=-this.va.y;
this.qb.y=this.va.x;this.Wg=this.h.n-this.k.n;this.O.oa();this.Ed=this.xe=this.Hb=this.cd=0;this.z.oa();this.da=this.t=this.ea=this.La=0;this.He=a.wh;this.Oe=a.Gh;this.Jf=a.Bh;this.Ie=a.fh;this.zb=a.Lg;this.wc=a.Mg}Mb(Ee.prototype,ze.prototype);
function Fe(a){var c=a.k,b=a.h,d;d=c.d;var e=d.a.x*a.i.x+d.b.x*a.i.y,f=d.a.y*a.i.x+d.b.y*a.i.y;d=b.d;e=b.c.x+(d.a.x*a.j.x+d.b.x*a.j.y)-(c.c.x+e);b=b.c.y+(d.a.y*a.j.x+d.b.y*a.j.y)-(c.c.y+f);d=c.d;return(d.a.x*a.va.x+d.b.x*a.va.y)*e+(d.a.y*a.va.x+d.b.y*a.va.y)*b}
Ee.prototype.Mb=function(){var a=this.k,c=this.h,b;b=a.d;var d=b.a.x*this.i.x+b.b.x*this.i.y,e=b.a.y*this.i.x+b.b.y*this.i.y;b=c.d;var f=b.a.x*this.j.x+b.b.x*this.j.y,g=b.a.y*this.j.x+b.b.y*this.j.y,h=a.f,i=c.f,k=a.m,l=c.m;b=a.d;var m=b.a.x*this.qb.x+b.b.x*this.qb.y;b=b.a.y*this.qb.x+b.b.y*this.qb.y;var n=c.c.x+f-a.c.x,o=c.c.y+g-a.c.y;this.O.M.x=-m;this.O.M.y=-b;this.O.N.x=m;this.O.N.y=b;this.O.aa=-(n*b-o*m);this.O.ba=f*b-g*m;this.cd=h+k*this.O.aa*this.O.aa+i+l*this.O.ba*this.O.ba;this.cd=1/this.cd;
this.xe=1/(k+l);if(this.zb||this.wc){b=a.d;m=b.a.x*this.va.x+b.b.x*this.va.y;b=b.a.y*this.va.x+b.b.y*this.va.y;this.z.M.x=-m;this.z.M.y=-b;this.z.N.x=m;this.z.N.y=b;this.z.aa=-(n*b-o*m);this.z.ba=f*b-g*m;this.La=h+k*this.z.aa*this.z.aa+i+l*this.z.ba*this.z.ba;this.La=1/this.La;if(this.zb){d=m*(n-d)+b*(o-e);if(P(this.Oe-this.He)<0.3)this.Q=3;else if(d<=this.He){if(this.Q!=1)this.t=0;this.Q=1}else if(d>=this.Oe){if(this.Q!=2)this.t=0;this.Q=2}else this.t=this.Q=0}}if(this.wc==r)this.ea=0;if(this.zb==
r)this.t=0;if(ve){d=this.Hb*this.O.M.y+(this.ea+this.t)*this.z.M.y;e=this.Hb*this.O.N.x+(this.ea+this.t)*this.z.N.x;f=this.Hb*this.O.N.y+(this.ea+this.t)*this.z.N.y;g=this.Hb*this.O.aa-this.Ed+(this.ea+this.t)*this.z.aa;n=this.Hb*this.O.ba+this.Ed+(this.ea+this.t)*this.z.ba;a.e.x+=h*(this.Hb*this.O.M.x+(this.ea+this.t)*this.z.M.x);a.e.y+=h*d;a.g+=k*g;c.e.x+=i*e;c.e.y+=i*f;c.g+=l*n}else this.ea=this.t=this.Ed=this.Hb=0;this.da=0};
Ee.prototype.tb=function(a){var c=this.k,b=this.h,d=c.f,e=b.f,f=c.m,g=b.m,h=-this.cd*this.O.nd(c.e,c.g,b.e,b.g);this.Hb+=h;c.e.x+=d*h*this.O.M.x;c.e.y+=d*h*this.O.M.y;c.g+=f*h*this.O.aa;b.e.x+=e*h*this.O.N.x;b.e.y+=e*h*this.O.N.y;b.g+=g*h*this.O.ba;h=-this.xe*(b.g-c.g);this.Ed+=h;c.g-=f*h;b.g+=g*h;if(this.wc&&this.Q!=3){h=-this.La*(this.z.nd(c.e,c.g,b.e,b.g)-this.Ie);var i=this.ea;this.ea=S(this.ea+h,-a.Ma*this.Jf,a.Ma*this.Jf);h=this.ea-i;c.e.x+=d*h*this.z.M.x;c.e.y+=d*h*this.z.M.y;c.g+=f*h*this.z.aa;
b.e.x+=e*h*this.z.N.x;b.e.y+=e*h*this.z.N.y;b.g+=g*h*this.z.ba}if(this.zb&&this.Q!=0){h=-this.La*this.z.nd(c.e,c.g,b.e,b.g);if(this.Q==3)this.t+=h;else if(this.Q==1){a=this.t;this.t=Q(this.t+h,0);h=this.t-a}else if(this.Q==2){a=this.t;this.t=this.t+h<0?this.t+h:0;h=this.t-a}c.e.x+=d*h*this.z.M.x;c.e.y+=d*h*this.z.M.y;c.g+=f*h*this.z.aa;b.e.x+=e*h*this.z.N.x;b.e.y+=e*h*this.z.N.y;b.g+=g*h*this.z.ba}};
Ee.prototype.sb=function(){var a,c,b=this.k,d=this.h,e=b.f,f=d.f,g=b.m,h=d.m,i;i=b.d;var k=i.a.x*this.i.x+i.b.x*this.i.y,l=i.a.y*this.i.x+i.b.y*this.i.y;i=d.d;a=i.a.x*this.j.x+i.b.x*this.j.y;i=i.a.y*this.j.x+i.b.y*this.j.y;k=b.c.x+k;l=b.c.y+l;a=d.c.x+a;i=d.c.y+i;a=a-k;k=i-l;i=b.d;var m=(i.a.x*this.qb.x+i.b.x*this.qb.y)*a+(i.a.y*this.qb.x+i.b.y*this.qb.y)*k;m=S(m,-6,6);c=-this.cd*m;b.c.x+=e*c*this.O.M.x;b.c.y+=e*c*this.O.M.y;b.n+=g*c*this.O.aa;d.c.x+=f*c*this.O.N.x;d.c.y+=f*c*this.O.N.y;d.n+=h*c*this.O.ba;
m=P(m);c=d.n-b.n-this.Wg;c=S(c,-ld,ld);var n=-this.xe*c;b.n-=b.m*n;b.d.l(b.n);d.n+=d.m*n;d.d.l(d.n);n=P(c);if(this.zb&&this.Q!=0){i=b.d;k=i.a.x*this.i.x+i.b.x*this.i.y;l=i.a.y*this.i.x+i.b.y*this.i.y;i=d.d;a=i.a.x*this.j.x+i.b.x*this.j.y;i=i.a.y*this.j.x+i.b.y*this.j.y;k=b.c.x+k;l=b.c.y+l;a=d.c.x+a;i=d.c.y+i;a=a-k;k=i-l;i=b.d;i=(i.a.x*this.va.x+i.b.x*this.va.y)*a+(i.a.y*this.va.x+i.b.y*this.va.y)*k;a=0;if(this.Q==3){a=S(i,-6,6);a=-this.La*a;m=Q(m,P(c))}else if(this.Q==1){a=i-this.He;m=Q(m,-a);a=S(a+
0.15,-6,0);a=-this.La*a;c=this.da;this.da=Q(this.da+a,0);a=this.da-c}else if(this.Q==2){a=i-this.Oe;m=Q(m,a);a=S(a-0.15,0,6);a=-this.La*a;c=this.da;this.da=this.da+a<0?this.da+a:0;a=this.da-c}b.c.x+=e*a*this.z.M.x;b.c.y+=e*a*this.z.M.y;b.n+=g*a*this.z.aa;b.d.l(b.n);d.c.x+=f*a*this.z.N.x;d.c.y+=f*a*this.z.N.y;d.n+=h*a*this.z.ba;d.d.l(d.n)}return m<=0.15&&n<=kd};function Ge(a){this.p=new Y;this.r=new Y;this.qa=a.type;this.o=this.L=q;this.k=a.Za;this.h=a.$a;this.xb=a.sc;this.ob=r;this.D=a.K;this.Ja=new X;this.sa=new X;this.ta=new X;this.pb=new O;this.hd=new O;this.W=new O;this.Kb=new X;this.Cd=new O;T(this.hd,a.target);var c=this.hd.x-this.h.c.x,b=this.hd.y-this.h.c.y;this.pb.x=c*this.h.d.a.x+b*this.h.d.a.y;this.pb.y=c*this.h.d.b.x+b*this.h.d.b.y;this.Gf=a.xh;this.W.oa();b=this.h.Ka;var d=2*jd*a.sh;c=2*b*a.rh*d;b=b*d*d;this.Kd=1/(c+a.Wf*b);this.Bf=a.Wf*b/
(c+a.Wf*b)}Mb(Ge.prototype,ze.prototype);
Ge.prototype.Mb=function(){var a=this.h,c;c=a.d;var b=c.a.x*this.pb.x+c.b.x*this.pb.y;c=c.a.y*this.pb.x+c.b.y*this.pb.y;var d=a.f,e=a.m;this.sa.a.x=d;this.sa.b.x=0;this.sa.a.y=0;this.sa.b.y=d;this.ta.a.x=e*c*c;this.ta.b.x=-e*b*c;this.ta.a.y=-e*b*c;this.ta.b.y=e*b*b;de(this.Ja,this.sa);ee(this.Ja,this.ta);this.Ja.a.x+=this.Kd;this.Ja.b.y+=this.Kd;fe(this.Ja,this.Kb);this.Cd.x=a.c.x+b-this.hd.x;this.Cd.y=a.c.y+c-this.hd.y;a.g*=0.98;var f=this.W.x,g=this.W.y;a.e.x+=d*f;a.e.y+=d*g;a.g+=e*(b*g-c*f)};
Ge.prototype.tb=function(a){var c=this.h,b;b=c.d;var d=b.a.x*this.pb.x+b.b.x*this.pb.y,e=b.a.y*this.pb.x+b.b.y*this.pb.y,f=c.e.x+-c.g*e,g=c.e.y+c.g*d;b=this.Kb;f=f+this.Bf*a.te*this.Cd.x+this.Kd*this.W.x;var h=g+this.Bf*a.te*this.Cd.y+this.Kd*this.W.y;g=-(b.a.x*f+b.b.x*h);h=-(b.a.y*f+b.b.y*h);b=this.W.x;f=this.W.y;this.W.x+=g;this.W.y+=h;g=bd(this.W);g>a.Ma*this.Gf&&U(this.W,a.Ma*this.Gf/g);g=this.W.x-b;h=this.W.y-f;c.e.x+=c.f*g;c.e.y+=c.f*h;c.g+=c.m*(d*h-e*g)};Ge.prototype.sb=ba(p);function He(a){this.p=new Y;this.r=new Y;this.qa=a.type;this.o=this.L=q;this.k=a.Za;this.h=a.$a;this.xb=a.sc;this.ob=r;this.D=a.K;this.i=new O;this.j=new O;this.fa=new O;var c,b,d;c=this.k.d;b=a.Pb.x-this.k.c.x;d=a.Pb.y-this.k.c.y;this.i.x=b*c.a.x+d*c.a.y;this.i.y=b*c.b.x+d*c.b.y;c=this.h.d;b=a.Qb.x-this.h.c.x;d=a.Qb.y-this.h.c.y;this.j.x=b*c.a.x+d*c.a.y;this.j.y=b*c.b.x+d*c.b.y;b=a.Qb.x-a.Pb.x;d=a.Qb.y-a.Pb.y;this.Zg=Math.sqrt(b*b+d*d);this.W=0}Mb(He.prototype,ze.prototype);
He.prototype.Mb=function(){var a;a=this.k.d;var c=a.a.x*this.i.x+a.b.x*this.i.y,b=a.a.y*this.i.x+a.b.y*this.i.y;a=this.h.d;var d=a.a.x*this.j.x+a.b.x*this.j.y;a=a.a.y*this.j.x+a.b.y*this.j.y;this.fa.x=this.h.c.x+d-this.k.c.x-c;this.fa.y=this.h.c.y+a-this.k.c.y-b;var e=Math.sqrt(this.fa.x*this.fa.x+this.fa.y*this.fa.y);e>0.15?U(this.fa,1/e):this.fa.oa();e=c*this.fa.y-b*this.fa.x;var f=d*this.fa.y-a*this.fa.x;this.Ka=this.k.f+this.k.m*e*e+this.h.f+this.h.m*f*f;this.Ka=1/this.Ka;if(ve){e=this.W*this.fa.x;
f=this.W*this.fa.y;this.k.e.x-=this.k.f*e;this.k.e.y-=this.k.f*f;this.k.g-=this.k.m*(c*f-b*e);this.h.e.x+=this.h.f*e;this.h.e.y+=this.h.f*f;this.h.g+=this.h.m*(d*f-a*e)}else this.W=0};
He.prototype.tb=function(){var a;a=this.k.d;var c=a.a.x*this.i.x+a.b.x*this.i.y,b=a.a.y*this.i.x+a.b.y*this.i.y;a=this.h.d;var d=a.a.x*this.j.x+a.b.x*this.j.y;a=a.a.y*this.j.x+a.b.y*this.j.y;var e=-this.Ka*(this.fa.x*(this.h.e.x+-this.h.g*a-(this.k.e.x+-this.k.g*b))+this.fa.y*(this.h.e.y+this.h.g*d-(this.k.e.y+this.k.g*c)));this.W+=e;var f=e*this.fa.x;e=e*this.fa.y;this.k.e.x-=this.k.f*f;this.k.e.y-=this.k.f*e;this.k.g-=this.k.m*(c*e-b*f);this.h.e.x+=this.h.f*f;this.h.e.y+=this.h.f*e;this.h.g+=this.h.m*
(d*e-a*f)};
He.prototype.sb=function(){var a;a=this.k.d;var c=a.a.x*this.i.x+a.b.x*this.i.y,b=a.a.y*this.i.x+a.b.y*this.i.y;a=this.h.d;var d=a.a.x*this.j.x+a.b.x*this.j.y;a=a.a.y*this.j.x+a.b.y*this.j.y;var e=this.h.c.x+d-this.k.c.x-c,f=this.h.c.y+a-this.k.c.y-b,g=Math.sqrt(e*e+f*f);e/=g;f/=g;g=g-this.Zg;g=S(g,-6,6);var h=-this.Ka*g;this.fa.l(e,f);e=h*this.fa.x;f=h*this.fa.y;this.k.c.x-=this.k.f*e;this.k.c.y-=this.k.f*f;this.k.n-=this.k.m*(c*f-b*e);this.h.c.x+=this.h.f*e;this.h.c.y+=this.h.f*f;this.h.n+=this.h.m*
(d*f-a*e);this.k.d.l(this.k.n);this.h.d.l(this.h.n);return P(g)<0.15};function Ie(a){this.p=new Y;this.r=new Y;this.qa=a.type;this.o=this.L=q;this.k=a.Za;this.h=a.$a;this.xb=a.sc;this.ob=r;this.D=a.K;this.Ab=new O;this.Bb=new O;this.i=new O;this.j=new O;this.R=new O;this.S=new O;var c,b,d;this.Sa=this.k.P.Ef;this.Ab.x=a.pe.x-this.Sa.c.x;this.Ab.y=a.pe.y-this.Sa.c.y;this.Bb.x=a.qe.x-this.Sa.c.x;this.Bb.y=a.qe.y-this.Sa.c.y;c=this.k.d;b=a.Pb.x-this.k.c.x;d=a.Pb.y-this.k.c.y;this.i.x=b*c.a.x+d*c.a.y;this.i.y=b*c.b.x+d*c.b.y;c=this.h.d;b=a.Qb.x-this.h.c.x;d=a.Qb.y-this.h.c.y;
this.j.x=b*c.a.x+d*c.a.y;this.j.y=b*c.b.x+d*c.b.y;this.Z=a.lh;b=a.pe.x-a.Pb.x;d=a.pe.y-a.Pb.y;c=Math.sqrt(b*b+d*d);b=a.qe.x-a.Qb.x;d=a.qe.y-a.Qb.y;b=Math.sqrt(b*b+d*d);d=Q(0.5*Je,c);b=Q(0.5*Je,b);this.Wc=d+this.Z*b;this.Hf=S(a.yh,d,this.Wc-this.Z*Je);this.If=S(a.zh,b,(this.Wc-Je)/this.Z);this.bc=this.ac=this.dd=0}Mb(Ie.prototype,ze.prototype);
Ie.prototype.Mb=function(){var a=this.k,c=this.h,b;b=a.d;var d=b.a.x*this.i.x+b.b.x*this.i.y,e=b.a.y*this.i.x+b.b.y*this.i.y;b=c.d;var f=b.a.x*this.j.x+b.b.x*this.j.y;b=b.a.y*this.j.x+b.b.y*this.j.y;var g=c.c.x+f,h=c.c.y+b,i=this.Sa.c.x+this.Bb.x,k=this.Sa.c.y+this.Bb.y;this.R.l(a.c.x+d-(this.Sa.c.x+this.Ab.x),a.c.y+e-(this.Sa.c.y+this.Ab.y));this.S.l(g-i,h-k);g=bd(this.R);h=bd(this.S);g>0.15?U(this.R,1/g):this.R.oa();h>0.15?U(this.S,1/h):this.S.oa();if(g<this.Hf)this.ac=this.De=0;else{this.De=2;
this.Md=0}if(h<this.If)this.bc=this.Ee=0;else{this.Ee=2;this.Nd=0}g=d*this.R.y-e*this.R.x;h=f*this.S.y-b*this.S.x;this.ad=a.f+a.m*g*g;this.bd=c.f+c.m*h*h;this.Od=this.ad+this.Z*this.Z*this.bd;this.ad=1/this.ad;this.bd=1/this.bd;this.Od=1/this.Od;g=(-this.dd-this.ac)*this.R.x;h=(-this.dd-this.ac)*this.R.y;i=(-this.Z*this.dd-this.bc)*this.S.x;k=(-this.Z*this.dd-this.bc)*this.S.y;a.e.x+=a.f*g;a.e.y+=a.f*h;a.g+=a.m*(d*h-e*g);c.e.x+=c.f*i;c.e.y+=c.f*k;c.g+=c.m*(f*k-b*i)};
Ie.prototype.tb=function(){var a=this.k,c=this.h,b;b=a.d;var d=b.a.x*this.i.x+b.b.x*this.i.y,e=b.a.y*this.i.x+b.b.y*this.i.y;b=c.d;var f=b.a.x*this.j.x+b.b.x*this.j.y;b=b.a.y*this.j.x+b.b.y*this.j.y;var g,h,i,k;g=a.e.x+-a.g*e;h=a.e.y+a.g*d;i=c.e.x+-c.g*b;k=c.e.y+c.g*f;g=-(this.R.x*g+this.R.y*h)-this.Z*(this.S.x*i+this.S.y*k);k=-this.Od*g;this.dd+=k;g=-k*this.R.x;h=-k*this.R.y;i=-this.Z*k*this.S.x;k=-this.Z*k*this.S.y;a.e.x+=a.f*g;a.e.y+=a.f*h;a.g+=a.m*(d*h-e*g);c.e.x+=c.f*i;c.e.y+=c.f*k;c.g+=c.m*
(f*k-b*i);if(this.De==2){g=a.e.x+-a.g*e;h=a.e.y+a.g*d;g=-(this.R.x*g+this.R.y*h);k=-this.ad*g;g=this.ac;this.ac=Q(0,this.ac+k);k=this.ac-g;g=-k*this.R.x;h=-k*this.R.y;a.e.x+=a.f*g;a.e.y+=a.f*h;a.g+=a.m*(d*h-e*g)}if(this.Ee==2){i=c.e.x+-c.g*b;k=c.e.y+c.g*f;g=-(this.S.x*i+this.S.y*k);k=-this.bd*g;g=this.bc;this.bc=Q(0,this.bc+k);k=this.bc-g;i=-k*this.S.x;k=-k*this.S.y;c.e.x+=c.f*i;c.e.y+=c.f*k;c.g+=c.m*(f*k-b*i)}};
Ie.prototype.sb=function(){var a=this.k,c=this.h,b,d=this.Sa.c.x+this.Ab.x,e=this.Sa.c.y+this.Ab.y,f=this.Sa.c.x+this.Bb.x,g=this.Sa.c.y+this.Bb.y,h,i,k,l,m,n,o,t=0;b=a.d;h=b.a.x*this.i.x+b.b.x*this.i.y;i=b.a.y*this.i.x+b.b.y*this.i.y;b=c.d;k=b.a.x*this.j.x+b.b.x*this.j.y;b=b.a.y*this.j.x+b.b.y*this.j.y;l=a.c.x+h;m=a.c.y+i;n=c.c.x+k;o=c.c.y+b;this.R.l(l-d,m-e);this.S.l(n-f,o-g);l=bd(this.R);m=bd(this.S);l>0.15?U(this.R,1/l):this.R.oa();m>0.15?U(this.S,1/m):this.S.oa();l=this.Wc-l-this.Z*m;t=Q(t,Math.abs(l));
l=S(l,-6,6);o=-this.Od*l;l=-o*this.R.x;m=-o*this.R.y;n=-this.Z*o*this.S.x;o=-this.Z*o*this.S.y;a.c.x+=a.f*l;a.c.y+=a.f*m;a.n+=a.m*(h*m-i*l);c.c.x+=c.f*n;c.c.y+=c.f*o;c.n+=c.m*(k*o-b*n);a.d.l(a.n);c.d.l(c.n);if(this.De==2){b=a.d;h=b.a.x*this.i.x+b.b.x*this.i.y;i=b.a.y*this.i.x+b.b.y*this.i.y;l=a.c.x+h;m=a.c.y+i;this.R.l(l-d,m-e);l=bd(this.R);if(l>0.15){this.R.x*=1/l;this.R.y*=1/l}else this.R.oa();l=this.Hf-l;t=Q(t,-l);l=S(l+0.15,-6,0);o=-this.ad*l;d=this.Md;this.Md=Q(0,this.Md+o);o=this.Md-d;l=-o*
this.R.x;m=-o*this.R.y;a.c.x+=a.f*l;a.c.y+=a.f*m;a.n+=a.m*(h*m-i*l);a.d.l(a.n)}if(this.Ee==2){b=c.d;k=b.a.x*this.j.x+b.b.x*this.j.y;b=b.a.y*this.j.x+b.b.y*this.j.y;n=c.c.x+k;o=c.c.y+b;this.S.l(n-f,o-g);m=bd(this.S);if(m>0.15){this.S.x*=1/m;this.S.y*=1/m}else this.S.oa();l=this.If-m;t=Q(t,-l);l=S(l+0.15,-6,0);o=-this.bd*l;d=this.Nd;this.Nd=Q(0,this.Nd+o);o=this.Nd-d;n=-o*this.S.x;o=-o*this.S.y;c.c.x+=c.f*n;c.c.y+=c.f*o;c.n+=c.m*(k*o-b*n);c.d.l(c.n)}return t<0.15};var Je=30;function Ke(a){this.p=new Y;this.r=new Y;this.qa=a.type;this.o=this.L=q;this.k=a.Za;this.h=a.$a;this.xb=a.sc;this.ob=r;this.D=a.K;this.Ab=new O;this.Bb=new O;this.i=new O;this.j=new O;this.V=new De;this.Cc=this.fc=this.Bc=this.ec=q;var c,b;this.Ug=a.vd.k;this.k=a.vd.h;if(a.vd.qa==1){this.ec=a.vd;T(this.Ab,this.ec.i);T(this.i,this.ec.j);c=Be(this.ec)}else{this.Bc=a.vd;T(this.Ab,this.Bc.i);T(this.i,this.Bc.j);c=Fe(this.Bc)}this.Vg=a.wd.k;this.h=a.wd.h;if(a.wd.qa==1){this.fc=a.wd;T(this.Bb,this.fc.i);
T(this.j,this.fc.j);b=Be(this.fc)}else{this.Cc=a.wd;T(this.Bb,this.Cc.i);T(this.j,this.Cc.j);b=Fe(this.Cc)}this.Z=a.lh;this.Wc=c+this.Z*b;this.W=0}Mb(Ke.prototype,ze.prototype);
Ke.prototype.Mb=function(){var a=this.Ug,c=this.Vg,b=this.k,d=this.h,e,f,g,h=0;this.V.oa();if(this.ec){this.V.aa=-1;h+=b.m}else{g=a.d;e=this.Bc.va;a=g.a.x*e.x+g.b.x*e.y;e=g.a.y*e.x+g.b.y*e.y;g=b.d;f=g.a.x*this.i.x+g.b.x*this.i.y;g=g.a.y*this.i.x+g.b.y*this.i.y;f=f*e-g*a;this.V.M.l(-a,-e);this.V.aa=-f;h+=b.f+b.m*f*f}if(this.fc){this.V.ba=-this.Z;h+=this.Z*this.Z*d.m}else{g=c.d;e=this.Cc.va;a=g.a.x*e.x+g.b.x*e.y;e=g.a.y*e.x+g.b.y*e.y;g=d.d;f=g.a.x*this.j.x+g.b.x*this.j.y;g=g.a.y*this.j.x+g.b.y*this.j.y;
f=f*e-g*a;this.V.N.l(-this.Z*a,-this.Z*e);this.V.ba=-this.Z*f;h+=this.Z*this.Z*(d.f+d.m*f*f)}this.Ka=1/h;b.e.x+=b.f*this.W*this.V.M.x;b.e.y+=b.f*this.W*this.V.M.y;b.g+=b.m*this.W*this.V.aa;d.e.x+=d.f*this.W*this.V.N.x;d.e.y+=d.f*this.W*this.V.N.y;d.g+=d.m*this.W*this.V.ba};Ke.prototype.tb=function(){var a=this.k,c=this.h,b=-this.Ka*this.V.nd(a.e,a.g,c.e,c.g);this.W+=b;a.e.x+=a.f*b*this.V.M.x;a.e.y+=a.f*b*this.V.M.y;a.g+=a.m*b*this.V.aa;c.e.x+=c.f*b*this.V.N.x;c.e.y+=c.f*b*this.V.N.y;c.g+=c.m*b*this.V.ba};
Ke.prototype.sb=function(){var a=this.k,c=this.h,b=-this.Ka*(this.Wc-((this.ec?Be(this.ec):Fe(this.Bc))+this.Z*(this.fc?Be(this.fc):Fe(this.Cc))));a.c.x+=a.f*b*this.V.M.x;a.c.y+=a.f*b*this.V.M.y;a.n+=a.m*b*this.V.aa;c.c.x+=c.f*b*this.V.N.x;c.c.y+=c.f*b*this.V.N.y;c.n+=c.m*b*this.V.ba;a.d.l(a.n);c.d.l(c.n);return p};function Le(a,c,b){this.Pd=new ed;this.vc=new Jd(this);this.Fe=q;this.qh=Od;this.Ta=this.$=this.nb=q;this.cb=this.yb=this.ya=0;this.Vc=q;this.yf=b;this.Tg=c;this.vc.P=this;this.Na=new ae(a,this.vc);this.Ef=Me(this,new Ne)}function Me(a,c){var b=new oe(c,a);b.L=q;if(b.o=a.nb)a.nb.L=b;a.nb=b;++a.ya;return b}function Oe(a,c){if(!(c.w&32)){if(c.L)c.L.o=c.o;if(c.o)c.o.L=c.L;if(c==a.nb)a.nb=c.o;c.w|=32;--a.ya;c.L=q;c.o=a.Vc;a.Vc=c}}
function Pe(a){a.vc.Be=p;for(var c=a.Vc;c;){var b=c;c=c.o;for(var d=b.Ta;d;){var e=d;d=d.next;var f=a;e=e.Rc;var g=e.xb;if(e.L)e.L.o=e.o;if(e.o)e.o.L=e.L;if(e==f.Ta)f.Ta=e.o;var h=e.k,i=e.h;Nd(h);Nd(i);if(e.p.s)e.p.s.next=e.p.next;if(e.p.next)e.p.next.s=e.p.s;if(e.p==h.Ta)h.Ta=e.p.next;e.p.s=q;e.p.next=q;if(e.r.s)e.r.s.next=e.r.next;if(e.r.next)e.r.next.s=e.r.s;if(e.r==i.Ta)i.Ta=e.r.next;e.r.s=q;e.r.next=q;--f.cb;if(g==r)for(e=(h.ed<i.ed?h:i).gc;e;e=e.o)e.ee(f.Na)}for(b=b.gc;b;){d=b;b=b.o;d.Y!=65535&&
d.q.P.Na.nc(d.Y)}}a.Vc=q;a.vc.Be=r}A=Le.prototype;A.Oc=function(a,c,b){var d=[];a=this.Na.tg(a,d,b);for(b=0;b<a;++b)c[b]=d[b];return a};A.Cf=q;A.eh=q;A.Na=q;A.nb=q;A.Ta=q;A.ya=0;A.yb=0;A.cb=0;A.Vc=q;A.yf=q;A.Ef=q;A.Fe=q;A.Le=0;var xe=1,ve=1;function Ne(){this.Ic=[];this.K=q;for(var a=0;a<64;a++)this.Ic[a]=q;this.position=new O(0,0);this.rotation=0;this.Pg=new O(0,0);this.lf=this.xf=this.ie=0;this.Ig=p;this.kh=this.Og=r}function Qe(a,c){for(var b=0;b<64;++b)if(a.Ic[b]==q){a.Ic[b]=c;break}};function Re(){this.type=-1;this.K=q;this.ab=new O(0,0);this.we=0;this.lb=0.2;this.Rb=this.rb=0;this.Qa=1;this.Xa=65535;this.tc=0}Re.prototype.Qa=0;Re.prototype.Xa=0;Re.prototype.tc=0;function Se(){this.type=-1;this.K=q;this.ab=new O(0,0);this.we=0;this.lb=0.2;this.Rb=this.rb=0;this.Qa=1;this.Xa=65535;this.tc=0;this.Jc=Array(8);this.type=Ad;for(var a=this.$d=0;a<8;a++)this.Jc[a]=new O}E(Se,Re);function Te(a,c){a.$d=c.length;for(var b=0;b<c.length;b++)a.Jc[b].l(c[b][0],c[b][1])};function Ue(){this.type=-1;this.K=q;this.ab=new O(0,0);this.we=0;this.lb=0.2;this.Rb=this.rb=0;this.Qa=1;this.Xa=65535;this.tc=0;this.type=Bd;this.jc=1}E(Ue,Re);function Ve(a,c){I.call(this,We,c);this.Jg=a}E(Ve,I);var We="eightball.PocketDropEvent.TYPE";function Xe(a,c,b){this.ih=a;this.zf=c;this.dh=b;this.fd=0};function Ye(a,c){this.Yb=this.zc=this.Gb=q;this.Me=0;this.xc=p;this.ka={};this.Df=new Vc;this.Hd=[];var b=this,d=ic();this.Xc=new Image;this.Xc.onload=function(){Ze(b)};this.Xc.src="images/cue.png";this.Af=new Image;this.Af.src="images/ballvignette.png";this.ye={};for(var e=1;e<=15;e++){var f=new Image;f.src="images/num"+e+".png";this.ye[e]=f}this.vb=a;this.bb=c;this.Ub=this.vb.getContext("2d");this.Fb=this.bb.getContext("2d");this.vb.setAttribute("width",$e*2+Z*4);this.vb.setAttribute("height",af*
2+Z*4);this.wb=new O($e+Z*2,af+Z*2);bf(this);this.Ub.translate(this.wb.x,this.wb.y);this.Ld=r;$(this.bb).mousedown(function(){if(b.Gb&&b.ka[0]){b.Ld=p;b.zc=b.Gb;b.Yb=new Kc(b.ka[0].c.x,b.ka[0].c.y,b.zc.x,b.zc.y)}});$(this.bb).mouseup(function(){b.Ld=r;if(b.xc&&b.Me>0.01){cf(b);if(b.Yb&&b.ka[0]){var g=new O(b.Yb.$e-b.Yb.Ze,b.Yb.bf-b.Yb.af);cd(g);U(g,500);T(b.ka[0].e,g);Nd(b.ka[0])}Ze(b)}});$(this.bb).mousemove(function(g){if(b.xc){g=new Lc(g.pageX,g.pageY);var h=new Lc($(b.vb).offset().left,$(b.vb).offset().top);
g=g.Ye(h);b.Gb=g.Ye(b.wb);if(b.Ld){g=new Kc(b.zc.x,b.zc.y,b.Gb.x,b.Gb.y);h=g.$e-g.Ze;var i=g.bf-g.af;h=Math.min(Math.sqrt(h*h+i*i),df);i=ef(b,b.Yb);g=ef(b,g);b.Me=h==0?0:h/df;Bc();d.info("Allowed Angle Range: "+Math.round(i-90)+" to "+Math.round(i+90));d.info("Strike Angle: "+Math.round(g));d.info("Strike Power: "+b.Me);Ze(b,b.zc,h)}else Ze(b,b.Gb,0)}});$(this.bb).mouseleave(function(){b.Gb=q;b.Ld=r});e=new Nc(ff);K(e,Pc,this.Gg,undefined,this);e.start()}E(Ye,Mc);
function cf(a){var c=new Nc(500);K(c,Pc,function(){var b=this.bb;D("display")?Qc(b,"none","display"):Ib("display",pa(Qc,b));c.Sb()},undefined,a);c.start();a.xc=r}function gf(a){var c=a.bb;D("display")?Qc(c,"block","display"):Ib("display",pa(Qc,c));a.xc=p;Ze(a,a.Gb,0)}
function Ze(a,c,b){if(a.Xc!=q&&a.Xc.complete){a.Fb.setTransform(1,0,0,1,0,0);a.Fb.clearRect(0,0,a.bb.width,a.bb.height);if(a.xc&&c&&a.ka[0]){var d,e=a.ka[0].c.x;d=a.ka[0].c.y;var f=new Lc($(a.vb).offset().left,$(a.vb).offset().top);f.x+=a.vb.width/2;f.y+=a.vb.height/2;d={x:f.x+e,y:f.y+d};e=Math.round(d.x);d=Math.round(d.y);c=Math.atan2(a.ka[0].c.y-c.y,c.x-a.ka[0].c.x)*-1+Math.PI;a.Fb.translate(e,d);a.Fb.rotate(c);a.Fb.clearRect(0,0,a.bb.width,a.bb.height);a.Fb.drawImage(a.Xc,hf+b,jf)}}}
function ef(a,c){var b=Math.atan2(c.bf-c.af,c.Ze-c.$e)*-1*180/Math.PI;if(b<0)b=360-b*-1;return b}
function bf(a){var c=new dd;c.H.l(-1E3,-1E3);c.F.l(1E3,1E3);a.P=new Le(c,new O(0,0),p);c=a.P;var b=a.wb,d=new Ne;d.rb=1;d.lb=1;var e,f;e=new Se;f=[[-b.x,-b.y+Z*2.5],[-b.x+Z*2,-b.y+Z*4.5],[-b.x+Z*2,b.y-Z*4.5],[-b.x,b.y-Z*2.5]];Te(e,f);Qe(d,e);e=new Se;f=Jc((new N(f)).multiply(kf)).reverse();Te(e,f);Qe(d,e);f=[[-b.x+Z*2.3,-b.y],[-b.x+Z*4.5,-b.y+Z*2],[-Z*2.3,-b.y+Z*2],[-Z*1.5,-b.y]].reverse();e=new Se;Te(e,f);Qe(d,e);e=new Se;f=Jc((new N(f)).multiply(kf)).reverse();Te(e,f);Qe(d,e);e=new Se;f=Jc((new N(f)).multiply(lf));
Te(e,f);Qe(d,e);e=new Se;f=Jc((new N(f)).multiply(kf)).reverse();Te(e,f);Qe(d,e);d.K=[mf];Me(c,d);c=a.P;b=a.wb;d=Array(6);e=[[b.x-21,b.y-21]];d[0]=nf(c,e[0][0],e[0][1]);e=Jc((new N(e)).multiply(kf));d[1]=nf(c,e[0][0],e[0][1]);e=Jc((new N(e)).multiply(lf));d[2]=nf(c,e[0][0],e[0][1]);e=Jc((new N(e)).multiply(kf));d[3]=nf(c,e[0][0],e[0][1]);e[0][0]=0;e[0][1]=b.y-12;d[4]=nf(c,e[0][0],e[0][1]);e=Jc((new N(e)).multiply(lf));d[5]=nf(c,e[0][0],e[0][1]);of(a);pf(a)}
function pf(a){var c=0,b=qf;a.ka[c]=rf(a,c,-0.5*$e,0);c++;for(var d=0;d<5;d++)for(var e=d+1,f=0.5*$e+d*b*Math.sqrt(3),g=-d*b,h=0;h<e;h++){a.ka[c]=rf(a,c,f,g+h*b*2);c++}}function of(a){Ib(a.ka,function(c){Oe(this.P,c)},a);Kb(a.ka);Ma(a.Hd);Pe(a.P)}function rf(a,c,b,d){var e=new Ue;e.Rb=4;e.jc=qf;e.rb=0.95;e.lb=0.8;var f=new Ne;Qe(f,e);f.position.l(b,d);f.xf=0.0050;f.lf=0.08;f.K=[sf,c,new Lc(qf,qf),new Lc(28-qf,28-qf)];return Me(a.P,f)}
Ye.prototype.Gg=function(){var a=this.Df,c=qa();if(a.Ce>0){var b=c-a.Ce;b/=1E3;a.Ae++;if(a.hc.length<10){a.hc.push(b);a.gd+=b;a.ne=a.Ae/a.gd}else{var d=a.Ae%a.hc.length;a.gd-=a.hc[d];a.hc[d]=b;a.gd+=a.hc[d];a.ne=a.hc.length/a.gd}}a.Ce=c;a=this.P;c=1/30;var e,f;a.Pd.Ma=c;a.Pd.ue=1;a.Pd.te=c>0?1/c:0;a.Le=0;b=a.vc;for(d=b.P.$;d!=q;){var g=d;d=d.o;g.w&2&&Md(b,g)}Pe(a);for(b=a.vc.P.$;b!=q;b=b.o)if(!((b.B.q.w&qe)==qe&&(b.C.q.w&qe)==qe)){d=b.Aa;b.Lc();g=b.Aa;if(d==0&&g>0){d=b.B.q;g=b.C.q;e=b.p;f=b.r;e.Fa=
b;e.Ba=g;e.s=q;e.next=d.$;if(e.next!=q)e.next.s=b.p;d.$=b.p;f.Fa=b;f.Ba=d;f.s=q;f.next=g.$;if(f.next!=q)f.next.s=f;g.$=f}else if(d>0&&g==0){d=b.B.q;g=b.C.q;e=b.p;f=b.r;if(e.s)e.s.next=e.next;if(e.next)e.next.s=e.s;if(e==d.$)d.$=e.next;e.s=q;e.next=q;if(f.s)f.s.next=f.next;if(f.next)f.next.s=f.s;if(f==g.$)g.$=f.next;f.s=q;f.next=q}}b=new we(a.ya,a.yb,a.cb,a.eh);for(e=a.nb;e!=q;e=e.o)e.w&=-5;for(d=a.$;d!=q;d=d.o)d.w&=-2;for(d=a.Ta;d!=q;d=d.o)d.ob=r;d=Array(a.ya);for(g=0;g<a.ya;g++)d[g]=q;for(g=a.nb;g!=
q;g=g.o)if(!(g.w&(Kd|4|qe|re))){b.bg();var h=0;d[h++]=g;for(g.w|=4;h>0;){e=d[--h];b.Xf(e);e.w&=~qe;if(!(e.w&Kd)){for(var i=e.$;i!=q;i=i.next)if(!(i.Fa.w&1)){b.Yf(i.Fa);i.Fa.w|=1;f=i.Ba;if(!(f.w&4)){d[h++]=f;f.w|=4}}for(e=e.Ta;e!=q;e=e.next)if(e.Rc.ob!=p){b.Zf(e.Rc);e.Rc.ob=p;f=e.Ba;if(!(f.w&4)){d[h++]=f;f.w|=4}}}}b.ge(a.Pd,a.Tg);a.Le=Q(a.Le,ye);a.yf&&b.yg(c);for(f=0;f<b.ya;++f){e=b.mb[f];if(e.w&Kd)e.w&=-5;if((e.w&re)==re&&a.Fe)if(a.Fe.oh(e)==1){Oe(a,e);b.mb[f]=q}}}a=a.Na.Kc();this.Ub.clearRect(-this.wb.x,
-this.wb.y,2*this.wb.x,2*this.wb.y);tf(this);uf(this,a);vf(this)};function uf(a,c){var b=r,d=r;Ka(c,function(e){var f=q,g=q;if(e.B.q.D==wf){f=e.B.q;g=e.C.q}else if(e.C.q.D==wf){f=e.C.q;g=e.B.q}if(f!=q){f=f;g=g;Oe(a.P,g);var h=g.D[1];delete a.ka[h];a.Hd.push(new Xe(h,g.c,f.c));a.dispatchEvent(new Ve(h,a))}e=[e.B.q.D[0],e.C.q.D[0]];Ha(e.length!=q);H.sort.call(e,Sa);if(e[0]==sf)if(e[1]==sf)d=p;else if(e[1]==mf)b=p});d&&a.dispatchEvent(new I(xf,a));b&&a.dispatchEvent(new I(yf,a))}
function tf(a){for(Ka(a.Hd,a.zg,a);Oa(a.Hd,function(d){return d.fd>=5}););for(var c=a.P.nb;c;c=c.o){var b=c.D;if(b)switch(b[0]){case sf:zf(a,c)}}}
Ye.prototype.zg=function(a){a.fd++;if(!(a.fd>=5)){var c=a.dh.od(),b=a.zf;c.x-=b.x;c.y-=b.y;U(c,a.fd/5);$c(c,a.zf);var d;b=Af[a.ih];a:{var e=b.match(Tc);if(e){d=Number(e[1]);var f=Number(e[2]);e=Number(e[3]);if(d>=0&&d<=255&&f>=0&&f<=255&&e>=0&&e<=255){d=[d,f,e];break a}}d=[]}if(!d.length)j(Error(b+" is not a valid RGB color"));d=d;a=a.fd/5;b=[0,0,0];f=a;f=Math.min(Math.max(f,0),1);d=[Math.round(f*b[0]+(1-f)*d[0]),Math.round(f*b[1]+(1-f)*d[1]),Math.round(f*b[2]+(1-f)*d[2])];b=this.Ub;e=d[0];f=d[1];
d=d[2];e=Number(e);f=Number(f);d=Number(d);if(isNaN(e)||e<0||e>255||isNaN(f)||f<0||f>255||isNaN(d)||d<0||d>255)j(Error('"('+e+","+f+","+d+'") is not a valid RGB color'));e=Uc(e.toString(16));f=Uc(f.toString(16));d=Uc(d.toString(16));b.fillStyle="#"+e+f+d;this.Ub.beginPath();this.Ub.arc(c.x,c.y,qf*(1-0.5*a),0,2*Math.PI,r);this.Ub.fill()}};
function zf(a,c){var b=c.D[1],d=c.gc,e=a.Ub,f,g,h=-5;f=-5;e.fillStyle=Af[b];e.beginPath();e.arc(d.c.x,d.c.y,d.I,0,2*Math.PI,r);e.fill();if(b>0){e.save();e.beginPath();e.arc(d.c.x,d.c.y,d.I,0,Math.PI*2,p);e.clip();c.D[2].x+=c.e.x*0.03;c.D[2].y+=c.e.y*0.03;f=d.I-c.D[2].x;g=d.I-c.D[2].y;h=Math.sqrt(Math.pow(f,2)+Math.pow(g,2));f=Math.atan2(g,f);if(h>d.I*3){c.D[2].x=c.D[3].x;c.D[2].y=c.D[3].y}c.D[3].x=c.D[2].x+Math.sin(Math.PI*2.5-f)*d.I*2.7;c.D[3].y=c.D[2].y+Math.cos(Math.PI*2.5-f)*d.I*2.7;f=c.c.x+c.D[2].x-
d.I;g=c.c.y+c.D[2].y-d.I;e.drawImage(a.ye[b],f-4,g-4);if(h>d.I){h=c.c.x+c.D[3].x-d.I;f=c.c.y+c.D[3].y-d.I;e.drawImage(a.ye[b],h-4,f-4)}e.restore()}e.drawImage(a.Af,d.c.x-d.I-2,d.c.y-d.I-2)}function vf(a){var c=0,b=0,d=Jb(a.ka);Ib(a.ka,function(e){var f=bd(e.e);if(f==0){b++;c++}else if(f<10){T(e.e,new O);b++;c++}else f<20&&c++},a);if(!a.xc)if(b==d||c==d&&a.ka[0]==0){a.dispatchEvent(new I(Bf,a));gf(a)}}
function nf(a,c,b){var d=new Ue;d.jc=7;var e=new Ne;Qe(e,d);e.position.l(c,b);e.K=[wf];return Me(a,e)}
var mf="table",wf="pocket",sf="ball",Bf="cueStopped",yf="wallHit",xf="ballHit",Af={1:"rgb(250,164,25)",9:"rgb(250,164,25)",2:"rgb(35,45,101)",10:"rgb(35,45,101)",3:"rgb(192,66,57)",11:"rgb(192,66,57)",4:"rgb(80,46,67)",12:"rgb(80,46,67)",5:"rgb(236,89,37)",13:"rgb(236,89,37)",6:"rgb(48,65,37)",14:"rgb(48,65,37)",7:"rgb(117,36,32)",15:"rgb(117,36,32)",8:"rgb(34,34,34)",0:"rgb(232,208,176)"},kf=new N([[-1,0],[0,1]]),lf=new N([[-1,0],[0,-1]]),ff=1E3/60,df=175,jf=-15,hf=7,af=192,$e=396,qf=14,Z=10;var Cf=/\s*;\s*/;function Df(a,c,b,d,e){if(/[;=]/.test(a))j(Error('Invalid cookie name "'+a+'"'));if(/;/.test(c))j(Error('Invalid cookie value "'+c+'"'));b!==undefined||(b=-1);e=e?";domain="+e:"";d=d?";path="+d:"";b=b<0?"":b==0?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(qa()+b*1E3)).toUTCString();document.cookie=a+"="+c+e+d+b}function Ef(a,c){for(var b=a+"=",d=(document.cookie||"").split(Cf),e=0,f;f=d[e];e++)if(f.indexOf(b)==0)return f.substr(b.length);return c};function Ff(a){this.Ua=q;this.ah=a;Ef(Gf,Hf)==Hf&&If(this)}function If(a){Jf(a);a.Ua=document.createElement("audio");a.Ua.setAttribute("src",a.ah);a.Ua.setAttribute("loop","loop");a.Ua.play();document.body.appendChild(a.Ua);Df(Gf,Hf)}function Jf(a){if(a.Ua){a.Ua.pause();a.Ua.parentNode.removeChild(a.Ua);a.Ua=q}}var Gf="eightball.Music.musicOn",Hf="on";function Kf(a,c){this.Fd=[];this.bh=c;this.Yc=0;this.Xg=navigator.userAgent.toLowerCase().indexOf("webkit")>-1;for(var b=0;b<=c;b++){var d=document.createElement("audio");document.body.appendChild(d);this.Fd[b]=d;this.Fd[b].location=a;d=d;d.setAttribute("src",a);d.load()}}Kf.prototype.play=function(){this.Yc++;if(this.Yc>=this.bh)this.Yc=0;var a=this.Fd[this.Yc];if(this.Xg){a.setAttribute("src",this.Fd[this.Yc].location);a.load()}a.play()};function Lf(){this.Nf=[];this.$c=Ef(Mf,Nf)==Nf}Lf.prototype.add=function(a,c){this.Nf[a]=c};Lf.prototype.play=function(a){this.$c&&this.Nf[a].play()};var Mf="eightball.SoundEffectManager.soundOn",Nf="on";function Of(a){this.Lb=q;this.Lf=a;K(this.Lf,We,this.Eg,undefined,this);this.reset()}E(Of,Mc);Of.prototype.reset=function(){if(this.Lb){this.Lb.Sb();this.kc=Pf}this.kc=Pf;Qf(this,Rf);var a=this.Lf;of(a);pf(a);this.Vd=0;Qf(this,Sf);this.sd=Ef(Tf,"500");Qf(this,Uf);this.oe=Vf;Qf(this,Wf)};Of.prototype.start=function(){if(this.Lb){this.Lb.Sb();this.kc=Pf}this.Lb=new Nc(1E3);this.Lb.start();K(this.Lb,Pc,this.Hg,undefined,this);this.oe=Xf};
function Yf(a,c){a.Vd+=c;Qf(a,Sf);if(a.Vd>a.sd){a.sd=a.Vd;Df(Tf,a.sd,7776E3);Qf(a,Uf)}}Of.prototype.Hg=function(){if(this.oe==Xf){this.kc--;if(this.kc<=0){this.Lb.stop();this.oe=Zf;Qf(this,$f)}else Qf(this,Rf)}};function Qf(a,c){a.dispatchEvent(new I(c,a))}Of.prototype.Eg=function(a){ic().info("Pocket drop: "+a.Jg);Yf(this,100)};var Vf="ready",Xf="started",Zf="ended",Wf="ready",$f="end",Rf="tick",Sf="score",Uf="highscore",Pf=120,Tf="eightball.Game.highScore";function ag(){function a(){e.$c?$("#soundsbuttonon").fadeIn("fast"):$("#soundsbuttonon").fadeOut("fast")}function c(){d.Ua!=q?$("#musicbuttonon").fadeIn("fast"):$("#musicbuttonon").fadeOut("fast")}function b(){var s=$(window).width(),w=$(window).height();y.Fb.canvas.width=s;y.Fb.canvas.height=w;Ze(y)}$("#loading").fadeOut(400);$("#game").fadeIn(1E3);$("#gamecontrolsouter").fadeIn(1E3);var d=new Ff("sounds/theme.mp4"),e=new Lf;e.add("ball0",new Kf("sounds/shot00.mp3",3));e.add("ball1",new Kf("sounds/shot01.mp3",
3));e.add("ball2",new Kf("sounds/shot02.mp3",3));e.add("ball3",new Kf("sounds/shot03.mp3",3));e.add("ball4",new Kf("sounds/shot04.mp3",3));e.add("ball5",new Kf("sounds/shot05.mp3",3));var f=$("#minutesremaining"),g=$("#secondsremainingtens"),h=$("#secondsremainingones"),i=$("#progress"),k=$("#overlay"),l=$("#start"),m=$("#pause"),n=$("canvas#demo_canvas")[0],o=$("canvas#cue_canvas")[0],t=29;l.click(function(){l.fadeOut(100,l.hide());k.fadeOut(400);u.start()});m.click(function(){Yf(u,100)});var y=
new Ye(n,o),u=new Of(y);K(u,Rf,function(){var s=Math.floor(u.kc/60),w=u.kc%60,z=Math.floor(w/10),v=w%10;f.html(s);g.html(z);h.html(v);z=Math.floor((u.kc-1)/4);if(z!=t){t=z;i.width(15*z)}Bc();ic().info("0"+s+":"+(w<10?"0"+w:w));s=new lc("#,###.##");v=y.Df.ne;if(isNaN(v))s=L.ng;else{w=[];z=v<0||v==0&&1/v<0;w.push(z?s.Sd:s.Ue);if(isFinite(v)){v*=z?-1:1;v*=s.kd;if(s.Yd){v=v;if(v==0){pc(s,v,s.gb,w);qc(s,0,w)}else{var F=Math.floor(Math.log(v)/Math.log(10));v/=Math.pow(10,F);var B=s.gb;if(s.Qd>1&&s.Qd>s.gb){for(;F%
s.Qd!=0;){v*=10;F--}B=1}else if(s.gb<1){F++;v/=10}else{F-=s.gb-1;v*=Math.pow(10,s.gb-1)}pc(s,v,B,w);qc(s,F,w)}}else pc(s,v,s.gb,w)}else w.push(L.jg);w.push(z?s.Qe:s.Ve);s=w.join("")}ic().info("FPS: "+s)});K(u,Sf,function(){var s=u.Vd;if(s==0)s="00";$("#score").html(s)});K(u,Uf,function(){$("#bestscore").html(u.sd)});K(u,Wf,function(){l.delay(800).fadeIn(400)});K(y,yf,x(),undefined,this);K(y,xf,function(){e.play("ball"+Math.floor(Math.random()*6))},undefined,this);u.reset();$(window).resize(b);b();
$(window).keypress(function(s){s.which==114&&u.reset()});$("#instructions").click(x());$("#musicbutton").click(function(){if(d.Ua!=q){Jf(d);Df(Gf,"off")}else If(d);c()});$("#soundsbutton").click(function(){e.$c=!e.$c;e.$c?Df(Mf,Nf):Df(Mf,"off");a()});c();a();$(".soundtest").click(function(){e.play(this.id)})}
$(window).load(function(){if(!Ac){var a=Ac=xc("div",{id:"debugContent",style:"display:block; position:absolute; top:7px; right:7px; padding:10px; width:300px; background: rgba(0,0,0,.4); color:yellowgreen; text-align:left; font-family:courier new; border:solid 1px black; z-index:9999;"});document.body.appendChild(a);a=ic();if(!a.Pc)a.Pc=[];a.Pc.push(Cc)}if(document.images){a=La("images/bestscore.png, images/cue.png, images/progressbg.png, images/progressunit.png, images/score.png, images/table.jpg, images/tableborder.png, images/timeremaining.png, images/wood.jpg".split(","),
va);for(var c=new Image,b=0;b<a.length;b++)c.src=a[b]}C.setTimeout(ag,500)});
